import{g as K,a as M,b as Q}from"./index-CEv67r-a.js";import{d as O,c as C,a as k,w as l,r as o,o as H,b as a,e as s,t as c,p as X,f as Z,_ as E,g as p,h as W,i as w,j as x,k as ee,u as ae}from"./index-CHA58Pkc.js";const B=L=>(X("data-v-1bfaf637"),L=L(),Z(),L),te={class:"statisticalCard"},le=B(()=>s("div",null,"團隊戰績",-1)),se={class:"teamData"},ne={class:"statisticalCard"},oe=B(()=>s("div",null,"團隊安打數",-1)),re={class:"teamData"},ie=B(()=>s("div",null,"本年度安打數",-1)),ce={class:"statisticalCard"},de=B(()=>s("div",null,"團隊打點數",-1)),ue={class:"teamData"},_e=B(()=>s("div",null,"本年度打點數",-1)),me={class:"statisticalCard"},pe=B(()=>s("div",null,"團隊全壘打數",-1)),he={class:"teamData"},ge=B(()=>s("div",null,"本年度全壘打數",-1)),be=O({__name:"statisticalData",props:{totalHits:{},totalRbis:{},totalHrs:{},thisYearLeagueGame:{}},setup(L){const g=L,r=C(()=>Array.isArray(g.thisYearLeagueGame)?g.thisYearLeagueGame.reduce((d,u)=>d+u.SingleB+u.DoubleB+u.TripleB+u.HR,0):0),f=C(()=>Array.isArray(g.thisYearLeagueGame)?g.thisYearLeagueGame.reduce((d,u)=>d+u.RBI,0):0),R=C(()=>Array.isArray(g.thisYearLeagueGame)?g.thisYearLeagueGame.reduce((d,u)=>d+u.HR,0):0);return(d,u)=>{const y=o("el-col"),v=o("el-row"),P=o("el-card");return H(),k(P,{class:"statistical"},{default:l(()=>[a(v,null,{default:l(()=>[a(y,{sm:12,md:6},{default:l(()=>[s("div",te,[le,s("div",se,c(),1),s("div",null,c(),1)])]),_:1}),a(y,{sm:12,md:6},{default:l(()=>[s("div",ne,[oe,s("div",re,c(d.totalHits),1),ie,s("div",null,c(r.value),1)])]),_:1}),a(y,{sm:12,md:6},{default:l(()=>[s("div",ce,[de,s("div",ue,c(d.totalRbis),1),_e,s("div",null,c(f.value),1)])]),_:1}),a(y,{sm:12,md:6},{default:l(()=>[s("div",me,[pe,s("div",he,c(d.totalHrs),1),ge,s("div",null,c(R.value),1)])]),_:1})]),_:1})]),_:1})}}}),fe=E(be,[["__scopeId","data-v-1bfaf637"]]),ve={class:"playerCardBox"},ye=["src"],Ce={class:"playerCardText"},Le={class:"playerCardTitle"},He={class:"playerCardInfo"},ke=O({__name:"playerRank",props:{loading:{type:Boolean},playersLeagueCareer:{},playerLength:{}},emits:["handlePlayer"],setup(L,{emit:g}){const r=L,f=g,R=p(0),d=p(0),u=p(0),y=p(["1"]),v=C(()=>{if(r.playersLeagueCareer.length!==r.playerLength)return[];const t=r.playersLeagueCareer.map(e=>({name:e.name,hit:Array.isArray(e.hitter)?e.hitter.reduce((n,_)=>n+_.SingleB+_.DoubleB+_.TripleB+_.HR,0):0,number:e.number,image:e.img})).sort((e,n)=>n.hit-e.hit);return P(t),t.slice(0,5)});function P(t){R.value=t.reduce((e,n)=>e+n.hit,0)}const I=C(()=>r.playersLeagueCareer.length!=r.playerLength),A=C(()=>{const t=r.playersLeagueCareer.map(e=>({name:e.name,rbi:Array.isArray(e.hitter)?e.hitter.reduce((n,_)=>n+_.RBI,0):0,number:e.number,image:e.img})).sort((e,n)=>n.rbi-e.rbi);return V(t),t.slice(0,5)});function V(t){d.value=t.reduce((e,n)=>e+n.rbi,0)}const z=C(()=>r.playersLeagueCareer.length!=r.playerLength),j=C(()=>{const t=r.playersLeagueCareer.map(e=>({name:e.name,hr:Array.isArray(e.hitter)?e.hitter.reduce((n,_)=>n+_.HR,0):0,number:e.number,image:e.img})).sort((e,n)=>n.hr-e.hr);return D(t),t.slice(0,5)});function D(t){u.value=t.reduce((e,n)=>e+n.hr,0)}const i=C(()=>r.playersLeagueCareer.length!=r.playerLength);function b({rowIndex:t}){if(t===0)return{background:"#f0f9eb",color:"#67c23a",fontWeight:"bold"}}return(t,e)=>{const n=o("el-card"),_=o("el-col"),h=o("el-table-column"),$=o("el-button"),T=o("el-table"),G=o("el-row"),N=o("el-collapse-item"),J=o("el-collapse"),S=W("loading");return H(),k(J,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=m=>y.value=m)},{default:l(()=>[a(N,{title:"安打 Top5",name:"1"},{default:l(()=>[a(n,{class:"rankCard"},{default:l(()=>[a(G,null,{default:l(()=>[a(_,{md:8},{default:l(()=>[w((H(),k(n,{class:"playerCard"},{default:l(()=>{var m,Y,q,F,U;return[s("div",ve,[s("img",{class:"playerCardImg",src:(m=v.value[0])!=null&&m.image?(Y=v.value[0])==null?void 0:Y.image:"public/image/emptyPlayer.png"},null,8,ye),s("div",Ce,[s("div",Le,c(`${(q=v.value[0])==null?void 0:q.name} #${(F=v.value[0])==null?void 0:F.number}`),1),s("div",He,c(`目前安打數: ${(U=v.value[0])==null?void 0:U.hit}`),1)])])]}),_:1})),[[S,I.value||t.loading]])]),_:1}),a(_,{md:16},{default:l(()=>[w((H(),k(T,{class:"rankTable",data:v.value,style:{width:"100%"},"cell-style":b},{default:l(()=>[a(h,{fixed:"",type:"index",label:"Top",width:"50"}),a(h,{prop:"name",label:"姓名"},{default:l(({row:m})=>[a($,{class:"playerNameBtn",text:"",size:"small",onClick:Y=>f("handlePlayer",m)},{default:l(()=>[x(c(m.name),1)]),_:2},1032,["onClick"])]),_:1}),a(h,{prop:"hit",label:"安打"})]),_:1},8,["data"])),[[S,I.value||t.loading]])]),_:1})]),_:1})]),_:1})]),_:1}),a(N,{title:"打點 Top5",name:"2"},{default:l(()=>[a(n,{class:"rankCard"},{default:l(()=>[w((H(),k(T,{class:"rankTable",data:A.value,style:{width:"100%"}},{default:l(()=>[a(h,{fixed:"",type:"index",label:"Top",width:"50"}),a(h,{prop:"name",label:"姓名"},{default:l(({row:m})=>[a($,{class:"playerNameBtn",text:"",size:"small",onClick:Y=>f("handlePlayer",m)},{default:l(()=>[x(c(m.name),1)]),_:2},1032,["onClick"])]),_:1}),a(h,{prop:"rbi",label:"打點"})]),_:1},8,["data"])),[[S,z.value||t.loading]])]),_:1})]),_:1}),a(N,{title:"全壘打 Top5",name:"3"},{default:l(()=>[a(n,{class:"rankCard"},{default:l(()=>[w((H(),k(T,{class:"rankTable",data:j.value,style:{width:"100%"}},{default:l(()=>[a(h,{fixed:"",type:"index",label:"Top",width:"50"}),a(h,{prop:"name",label:"姓名"},{default:l(({row:m})=>[a($,{class:"playerNameBtn",text:"",size:"small",onClick:Y=>f("handlePlayer",m)},{default:l(()=>[x(c(m.name),1)]),_:2},1032,["onClick"])]),_:1}),a(h,{prop:"hr",label:"全壘打"})]),_:1},8,["data"])),[[S,i.value||t.loading]])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Be=E(ke,[["__scopeId","data-v-6db9a5f7"]]),Pe={class:"homePage"},Re={class:"block"},$e={class:"block"},Te=O({__name:"HomePage",setup(L){const g=p([]),r=p(0),f=p(!1),R=p([]),d=ae(),u=p(0),y=p(0),v=p(0),P=p([]),I=new Date().getFullYear().toString(),A=p([]);function V(){f.value=!0,K().then(i=>{g.value=i,r.value=i.length,z(i)}).catch(i=>{console.log(i)}).finally(()=>{f.value=!1})}async function z(i){i.forEach(b=>{const t=`${b.name}${b.number}`;M(t).then(e=>{R.value.push(Object.assign(b,{hitter:e}))}).catch(e=>{console.log(e)}),Q(t,"季賽").then(e=>{A.value.push(Object.assign(b,{hitter:e})),j(e)}).catch(e=>{console.log(e)})})}function j(i){P.value.push(...i.filter(b=>b.season===I).map(b=>b))}function D(i){i.name&&d.push({name:"PlayerInfoPage",query:{name:i.name,number:i.number}})}return V(),(i,b)=>{const t=o("el-table-column"),e=o("el-button"),n=o("el-table"),_=o("el-row"),h=o("el-tab-pane"),$=o("el-tabs"),T=W("loading");return H(),ee("div",Pe,[s("div",Re,[a($,{type:"border-card",class:"tabsCard"},{default:l(()=>[a(h,{label:"打者"},{default:l(()=>[a(_,null,{default:l(()=>[w((H(),k(n,{class:"homePageTable",stripe:"",data:g.value,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:l(()=>[a(t,{fixed:"",prop:"number",label:"No",width:"50"}),a(t,{prop:"name",label:"姓名",width:"100"},{default:l(({row:G})=>[a(e,{class:"playerNameBtn",text:"",size:"small",onClick:N=>D(G)},{default:l(()=>[x(c(G.name),1)]),_:2},1032,["onClick"])]),_:1}),a(t,{prop:"age",label:"年齡"}),a(t,{prop:"position",label:"守備位置"}),a(t,{prop:"gradeIndex",label:"總評"}),a(t,{prop:"hit",label:"打擊"}),a(t,{prop:"speed",label:"速度"}),a(t,{prop:"defense",label:"守備"}),a(t,{prop:"arm",label:"傳球"})]),_:1},8,["data"])),[[T,f.value]])]),_:1})]),_:1}),a(h,{label:"投手"},{default:l(()=>[x("coming soon...")]),_:1})]),_:1})]),s("div",$e,[a(Be,{loading:f.value,playersLeagueCareer:A.value,playerLength:r.value,onHandlePlayer:D},null,8,["loading","playersLeagueCareer","playerLength"])]),a(fe,{totalHits:u.value,totalRbis:y.value,totalHrs:v.value,thisYearLeagueGame:P.value},null,8,["totalHits","totalRbis","totalHrs","thisYearLeagueGame"])])}}}),xe=E(Te,[["__scopeId","data-v-a68e3a19"]]);export{xe as default};
