import{d as W,f as i,o as x,a as O,b as e,w as p,_ as j,l as L,m as z,n as M,q as Q,s as Z,v as U,u as J,x as Y,r as q,c as K,h as X,i as I,g as ee,j as H,t as k}from"./index-BtfKNKpi.js";import{r as te,u as ae,b as le,a as oe}from"./index-3QHpq9VD.js";const re={class:"battleGame"},se=W({__name:"battleGame",props:{games:{}},setup(n){const m=n;function w(h){return typeof h.SBP=="number"?h.SBP:0}return(h,l)=>{const t=i("el-table-column"),g=i("el-table");return x(),O("div",re,[e(g,{data:m.games,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:p(()=>[e(t,{prop:"gameType",label:"賽事"}),e(t,{prop:"group",label:"組別"}),e(t,{fixed:"",prop:"team",label:"隊伍"}),e(t,{prop:"PA",label:"打席"}),e(t,{prop:"SingleB",label:"安打"}),e(t,{prop:"DoubleB",label:"二壘安打"}),e(t,{prop:"TripleB",label:"三壘安打"}),e(t,{prop:"HR",label:"全壘打"}),e(t,{prop:"RBI",label:"打點"}),e(t,{prop:"R",label:"得分"}),e(t,{prop:"BB",label:"四壞"}),e(t,{prop:"SO",label:"三振"}),e(t,{prop:"SF",label:"高飛犧牲打"}),e(t,{prop:"SH",label:"犧牲觸擊"}),e(t,{prop:"ERRCH",label:"失誤"}),e(t,{prop:"HBP",label:"觸身球"}),e(t,{prop:"SB",label:"盜壘成功"}),e(t,{prop:"CS",label:"盜壘失敗"}),e(t,{prop:"SBP",label:"盜壘成功率",formatter:w}),e(t,{prop:"AVG",label:"AVG"}),e(t,{prop:"OBP",label:"上壘率"}),e(t,{prop:"SLG",label:"長打率"}),e(t,{prop:"OPS",label:"OPS"})]),_:1},8,["data"])])}}}),ne=j(se,[["__scopeId","data-v-5802567f"]]);function pe(n){return L()?(M(n),!0):!1}function E(n){return typeof n=="function"?n():z(n)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const C=new WeakMap;function N(n,m,w={}){const{mode:h="replace",route:l=U(),router:t=J(),transform:g=s=>s}=w;C.has(t)||C.set(t,new Map);const v=C.get(t);let d=l.query[n];pe(()=>{d=void 0});let S;const G=Q((s,c)=>(S=c,{get(){return s(),g(d!==void 0?d:E(m))},set(r){d!==r&&(d=r===m||r===null?void 0:r,v.set(n,r===m||r===null?void 0:r),c(),Y(()=>{if(v.size===0)return;const o=Object.fromEntries(v.entries());v.clear();const{params:u,query:f,hash:y}=l;t[E(h)]({params:u,query:{...f,...o},hash:y})}))}}));return Z(()=>l.query[n],s=>{d=s,S()},{flush:"sync"}),G}const ce="1ZxdApqxN3xdZWMbyxLmYUfi16qE47sARGBWEPJbIZj8";async function ue(n){const m=`https://docs.google.com/spreadsheets/d/${ce}/export?format=xlsx`;return await new Promise(l=>{te(m,g=>{const v=g.Sheets[n],d=ae.sheet_to_json(v);l(d)})})}const ie={class:"playerInfoPage"},be={key:0},_e={key:1},me="https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",de=W({__name:"PlayerInfoPage",setup(n){var G;const m=N("name"),w=N("number"),h=q([]),l=q(),t=q([]),g=q(!1);if(w.value||m.value){g.value=!0;const s=Number(w.value),c=(G=m.value)==null?void 0:G.toString();v(c,s)}async function v(s,c){const r=`${s}${c}`;await le(c).then(o=>{l.value=o}).catch(o=>{console.log(o)}),await ue(r).then(o=>{h.value=o}).catch(o=>{console.log(o)}),await oe(r).then(o=>{l.value&&t.value.push(Object.assign(l.value,{hitter:o}))}).catch(o=>{console.log(o)}),g.value=!1}const d=K(()=>s=>{const{columns:c,data:r}=s,o=[];return c.forEach((u,f)=>{if(f===0){o[f]="總計";return}const y=r.map(a=>Number(a[u.property]));u.property==="AVG"||u.property==="OBP"||u.property==="SLG"||u.property==="OPS"?y.length===0?o[f]=0:o[f]=(y.reduce((a,R)=>a+R)/y.length).toFixed(3):y.length===0?o[f]=0:o[f]=y.reduce((a,R)=>a+R,0)}),o});function S(s,c,r){return s||console.log(s,c,r),r.toFixed(3)}return(s,c)=>{const r=i("el-avatar"),o=i("el-col"),u=i("el-descriptions-item"),f=i("el-descriptions"),y=i("el-row"),a=i("el-table-column"),R=i("el-table"),A=i("el-tab-pane"),F=i("el-tabs"),T=i("el-card"),V=ee("loading");return x(),O("div",ie,[X((x(),I(T,null,{default:p(()=>[e(y,null,{default:p(()=>[e(o,{span:6},{default:p(()=>{var B,P;return[(B=l.value)!=null&&B.img?(x(),I(r,{key:0,shape:"square",size:50,src:(P=l.value)==null?void 0:P.img},null,8,["src"])):(x(),I(r,{key:1,shape:"square",size:50,src:me}))]}),_:1}),e(o,{span:18},{default:p(()=>{var B,P;return[e(f,{title:`${(B=l.value)==null?void 0:B.name} #${(P=l.value)==null?void 0:P.number}`},{default:p(()=>[e(u,{label:"年齡"},{default:p(()=>{var b,_;return[H(k((b=l.value)!=null&&b.age?(_=l.value)==null?void 0:_.age:"--"),1)]}),_:1}),e(u,{label:"身高/體重"},{default:p(()=>{var b,_,$,D;return[H(k((b=l.value)!=null&&b.height?(_=l.value)==null?void 0:_.height:"-")+k(($=l.value)!=null&&$.weight?`/${(D=l.value)==null?void 0:D.weight}`:"/-"),1)]}),_:1}),e(u,{label:"守備位置"},{default:p(()=>{var b,_;return[H(k((b=l.value)!=null&&b.position?(_=l.value)==null?void 0:_.position:"--"),1)]}),_:1}),e(u,{label:"投打習慣"},{default:p(()=>{var b,_;return[H(k((b=l.value)!=null&&b.pitchingAndHiterHabits?(_=l.value)==null?void 0:_.pitchingAndHiterHabits:"--"),1)]}),_:1})]),_:1},8,["title"])]}),_:1})]),_:1}),e(F,{type:"border-card"},{default:p(()=>[e(A,{label:"生涯數據"},{default:p(()=>{var B,P;return[(B=l.value)!=null&&B.hitter?(x(),O("div",be,[e(R,{data:(P=l.value)==null?void 0:P.hitter,height:"250",style:{width:"100%"},"empty-text":"暫無數據","show-summary":"","summary-method":d.value},{default:p(()=>[e(a,{fixed:"",prop:"season",label:"球季"}),e(a,{prop:"PA",label:"打席"}),e(a,{prop:"AB",label:"打數"}),e(a,{prop:"SingleB",label:"安打"}),e(a,{prop:"DoubleB",label:"二壘安打"}),e(a,{prop:"TripleB",label:"三壘安打"}),e(a,{prop:"HR",label:"全壘打"}),e(a,{prop:"RBI",label:"打點"}),e(a,{prop:"R",label:"得分"}),e(a,{prop:"BB",label:"四壞"}),e(a,{prop:"SO",label:"三振"}),e(a,{prop:"SF",label:"高飛犧牲打"}),e(a,{prop:"SH",label:"犧牲觸擊"}),e(a,{prop:"ERRCH",label:"失誤"}),e(a,{prop:"HBP",label:"觸身球"}),e(a,{prop:"SB",label:"盜壘成功"}),e(a,{prop:"CS",label:"盜壘失敗"}),e(a,{prop:"SBP",label:"盜壘成功率",formatter:S}),e(a,{prop:"AVG",label:"AVG",formatter:S}),e(a,{prop:"OBP",label:"上壘率",formatter:S}),e(a,{prop:"SLG",label:"長打率",formatter:S}),e(a,{prop:"OPS",label:"OPS",formatter:S})]),_:1},8,["data","summary-method"])])):(x(),O("div",_e,"暫無選手資料"))]}),_:1}),e(A,{label:"進階數據"}),e(A,{label:"對戰成績"},{default:p(()=>[e(ne,{games:h.value},null,8,["games"])]),_:1})]),_:1})]),_:1})),[[V,g.value]])])}}}),ge=j(de,[["__scopeId","data-v-854390cd"]]);export{ge as default};
