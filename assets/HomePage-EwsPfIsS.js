import{q as ee,g as ae,a as te}from"./vue3-apexcharts-R2-sLjD6.js";import{d as G,c as C,a as D,w as s,r as h,o as H,b as l,e as r,t as P,p as X,f as Z,_ as $,g as K,h as W,i as z,j as b,k as M,u as le,l as ne,F as se,m as re}from"./index-CIYIysw8.js";const I=v=>(X("data-v-e8a2752d"),v=v(),Z(),v),oe={class:"statisticalCard"},ie=I(()=>r("div",null,"團隊戰績",-1)),ce={class:"teamData"},ue={class:"statisticalCard"},de=I(()=>r("div",null,"團隊安打數",-1)),_e={class:"teamData"},pe=I(()=>r("div",null,"本年度安打數",-1)),ge={class:"statisticalCard"},he=I(()=>r("div",null,"團隊打點數",-1)),me={class:"teamData"},ve=I(()=>r("div",null,"本年度打點數",-1)),be={class:"statisticalCard"},fe=I(()=>r("div",null,"團隊全壘打數",-1)),ye={class:"teamData"},Le=I(()=>r("div",null,"本年度全壘打數",-1)),Pe=G({__name:"statisticalData",props:{totalHits:{},totalRbis:{},totalHrs:{},thisYearLeagueGame:{}},setup(v){const _=v,o=C(()=>Array.isArray(_.thisYearLeagueGame)?_.thisYearLeagueGame.reduce((g,c)=>g+c.SingleB+c.DoubleB+c.TripleB+c.HR,0):0),p=C(()=>Array.isArray(_.thisYearLeagueGame)?_.thisYearLeagueGame.reduce((g,c)=>g+c.RBI,0):0),y=C(()=>Array.isArray(_.thisYearLeagueGame)?_.thisYearLeagueGame.reduce((g,c)=>g+c.HR,0):0);return(g,c)=>{const u=h("el-col"),i=h("el-row");return H(),D(i,null,{default:s(()=>[l(u,{sm:12,md:6},{default:s(()=>[r("div",oe,[ie,r("div",ce,P(),1),r("div",null,P(),1)])]),_:1}),l(u,{sm:12,md:6},{default:s(()=>[r("div",ue,[de,r("div",_e,P(g.totalHits),1),pe,r("div",null,P(o.value),1)])]),_:1}),l(u,{sm:12,md:6},{default:s(()=>[r("div",ge,[he,r("div",me,P(g.totalRbis),1),ve,r("div",null,P(p.value),1)])]),_:1}),l(u,{sm:12,md:6},{default:s(()=>[r("div",be,[fe,r("div",ye,P(g.totalHrs),1),Le,r("div",null,P(y.value),1)])]),_:1})]),_:1})}}}),ke=$(Pe,[["__scopeId","data-v-e8a2752d"]]),Be=G({__name:"rankTable",props:{rank:{},loading:{type:Boolean},filterData:{},rankLoading:{type:Boolean}},emits:["handlePlayer"],setup(v,{emit:_}){const o=v,p=_;function y({rowIndex:u}){if(u===0)return{background:"#f0f9eb",color:"#67c23a",fontWeight:"bold"}}function g(){switch(o.rank){case"hit":return"安打";case"rbi":return"打點";case"hr":return"全壘打";case"avg":return"打擊率";case"sb":return"盜壘"}}function c(u){return o.rank==="avg"?u.avg?u.avg.toFixed(3):0 .toFixed(3):u[o.rank]}return(u,i)=>{const L=h("el-table-column"),m=h("el-button"),B=h("el-table"),S=K("loading");return W((H(),D(B,{class:"rankTable",data:o.filterData,style:{width:"100%"},"cell-style":y},{default:s(()=>[l(L,{fixed:"",type:"index",label:"Top",width:"50"}),l(L,{prop:"name",label:"姓名"},{default:s(({row:R})=>[l(m,{class:"playerNameBtn",text:"",size:"small",onClick:w=>p("handlePlayer",R)},{default:s(()=>[z(P(R.name),1)]),_:2},1032,["onClick"])]),_:1}),l(L,{prop:o.rank,label:g()},{default:s(({row:R})=>[z(P(c(R)),1)]),_:1},8,["prop","label"])]),_:1},8,["data"])),[[S,u.rankLoading||u.loading]])}}}),V=$(Be,[["__scopeId","data-v-4840737d"]]),Ce={class:"playerCardBox"},Ae=["src"],He={class:"playerCardText"},Re={class:"playerCardTitle"},Te={class:"playerCardInfo"},Se=G({__name:"playerRank",props:{loading:{type:Boolean},playersLeagueCareer:{},playerLength:{}},emits:["handlePlayer","totalHits","totalRbis","totalHrs","totalAvg","totalSb"],setup(v,{emit:_}){const o=v,p=_,y=b(0),g=b(0),c=b(0),u=b(0),i=b(0),L=b(["1"]),m=C(()=>{if(o.playersLeagueCareer.length!==o.playerLength)return[];const t=o.playersLeagueCareer.map(e=>({name:e.name,hit:Array.isArray(e.hitter)?e.hitter.reduce((n,d)=>n+d.SingleB+d.DoubleB+d.TripleB+d.HR,0):0,number:e.number,image:e.img})).sort((e,n)=>n.hit-e.hit);return B(t),t.slice(0,5)});function B(t){y.value=t.reduce((e,n)=>e+n.hit,0),p("totalHits",y.value)}const S=C(()=>{const t=o.playersLeagueCareer.map(e=>({name:e.name,rbi:Array.isArray(e.hitter)?e.hitter.reduce((n,d)=>n+d.RBI,0):0,number:e.number,image:e.img})).sort((e,n)=>n.rbi-e.rbi);return R(t),t.slice(0,5)});function R(t){g.value=t.reduce((e,n)=>e+n.rbi,0),p("totalRbis",g.value)}const w=C(()=>{const t=o.playersLeagueCareer.map(e=>({name:e.name,hr:Array.isArray(e.hitter)?e.hitter.reduce((n,d)=>n+d.HR,0):0,number:e.number,image:e.img})).sort((e,n)=>n.hr-e.hr);return j(t),t.slice(0,5)});function j(t){c.value=t.reduce((e,n)=>e+n.hr,0),p("totalHrs",c.value)}const O=C(()=>{const t=o.playersLeagueCareer.map(e=>({name:e.name,avg:Array.isArray(e.hitter)?e.hitter.reduce((n,d)=>n+d.AVG,0)/e.hitter.length:0,number:e.number,image:e.img})).sort((e,n)=>n.avg-e.avg);return q(t),t.slice(0,5)});function q(t){u.value=t.reduce((e,n)=>e+n.avg,0)}const U=C(()=>{const t=o.playersLeagueCareer.map(e=>({name:e.name,sb:Array.isArray(e.hitter)?e.hitter.reduce((n,d)=>n+d.SB,0):0,number:e.number,image:e.img})).sort((e,n)=>n.sb-e.sb);return J(t),t.slice(0,5)});function J(t){i.value=t.reduce((e,n)=>e+n.sb,0)}const T=C(()=>o.playersLeagueCareer.length!=o.playerLength);return(t,e)=>{const n=h("el-card"),d=h("el-col"),x=h("el-row"),A=h("el-collapse-item"),a=h("el-collapse"),Y=K("loading");return H(),D(a,{modelValue:L.value,"onUpdate:modelValue":e[5]||(e[5]=f=>L.value=f),accordion:""},{default:s(()=>[l(A,{title:"安打 Top5",name:"1"},{default:s(()=>[l(n,{class:"rankCard"},{default:s(()=>[l(x,null,{default:s(()=>[l(d,{md:8},{default:s(()=>[W((H(),D(n,{class:"playerCard"},{default:s(()=>{var f,N,E,F,k;return[r("div",Ce,[r("img",{class:"playerCardImg",src:(f=m.value[0])!=null&&f.image?(N=m.value[0])==null?void 0:N.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,Ae),r("div",He,[r("div",Re,P(`${(E=m.value[0])==null?void 0:E.name} #${(F=m.value[0])==null?void 0:F.number}`),1),r("div",Te,P(`目前安打數: ${(k=m.value[0])==null?void 0:k.hit}`),1)])])]}),_:1})),[[Y,T.value||t.loading]])]),_:1}),l(d,{md:16},{default:s(()=>[l(V,{rank:"hit",loading:t.loading,rankLoading:T.value,filterData:m.value,onHandlePlayer:e[0]||(e[0]=f=>p("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),l(A,{title:"打點 Top5",name:"2"},{default:s(()=>[l(n,{class:"rankCard"},{default:s(()=>[l(V,{rank:"rbi",loading:t.loading,rankLoading:T.value,filterData:S.value,onHandlePlayer:e[1]||(e[1]=f=>p("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),l(A,{title:"全壘打 Top5",name:"3"},{default:s(()=>[l(n,{class:"rankCard"},{default:s(()=>[l(V,{rank:"hr",loading:t.loading,rankLoading:T.value,filterData:w.value,onHandlePlayer:e[2]||(e[2]=f=>p("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),l(A,{title:"打擊率 Top5",name:"4"},{default:s(()=>[l(n,{class:"rankCard"},{default:s(()=>[l(V,{rank:"avg",loading:t.loading,rankLoading:T.value,filterData:O.value,onHandlePlayer:e[3]||(e[3]=f=>p("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),l(A,{title:"盜壘 Top5",name:"5"},{default:s(()=>[l(n,{class:"rankCard"},{default:s(()=>[l(V,{rank:"sb",loading:t.loading,rankLoading:T.value,filterData:U.value,onHandlePlayer:e[4]||(e[4]=f=>p("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ie=$(Se,[["__scopeId","data-v-898778c5"]]),De=G({__name:"hitterRank",props:{playersLeagueCareer:{},playerLength:{}},setup(v){const _=v;function o(y){if(Array.isArray(y)){const c=(y.reduce((u,i)=>u+i.AVG,0)/y.length).toFixed(3);return c==="NaN"?0 .toFixed(3):c}else return 0}const p=C(()=>_.playersLeagueCareer.length!==_.playerLength);return(y,g)=>{const c=h("el-table-column"),u=h("el-table"),i=K("loading");return W((H(),D(u,{class:"rankTable",stripe:"",data:_.playersLeagueCareer,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:s(()=>[l(c,{fixed:"",prop:"number",label:"No",width:"70",sortable:""}),l(c,{prop:"name",label:"球員",width:"100"}),l(c,{prop:"hitter",label:"AVG"},{default:s(({row:L})=>[z(P(o(L.hitter)),1)]),_:1})]),_:1},8,["data"])),[[i,p.value]])}}}),Ge=$(De,[["__scopeId","data-v-9668def2"]]),$e={id:"hitterScatterChart"},xe=G({__name:"hitterChart",props:{playersLeagueCareer:{},playerLength:{}},setup(v){const _=v,o=b([]),p=C(()=>_.playersLeagueCareer.length===_.playerLength?_.playersLeagueCareer.map(i=>{const L=g(i.hitter),m=c(i.hitter);return y(i),{name:i.name,data:[[m,L]]}}):[]);function y(i){i.img?o.value.push(i.img):o.value.push("https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png")}function g(i){if(Array.isArray(i)){const m=(i.reduce((B,S)=>B+S.AVG,0)/i.length).toFixed(3);return m==="NaN"?0 .toFixed(3):m}else return 0}function c(i){return Array.isArray(i)?i.reduce((m,B)=>m+B.PA,0):0}const u=b({series:p,chartOptions:{chart:{height:350,type:"scatter",animations:{enabled:!1},zoom:{enabled:!1},toolbar:{show:!1}},colors:["black"],xaxis:{tickAmount:10,min:0},yaxis:{tickAmount:7},markers:{colors:["green"],size:15,discrete:[{seriesIndex:0,dataPointIndex:1,fillColor:"#111",strokeColor:"#eee",size:8}]},fill:{type:"image",opacity:1,image:{src:o.value,width:30,height:30}},legend:{labels:{useSeriesColors:!0}}}});return(i,L)=>(H(),M("div",$e,[l(le(ee),{type:"scatter",height:"350",options:u.value.chartOptions,series:u.value.series},null,8,["options","series"])]))}}),Ve=$(xe,[["__scopeId","data-v-47d1f431"]]),Q=v=>(X("data-v-6bdac4b9"),v=v(),Z(),v),we={class:"homePage"},Oe={class:"block"},Ye=Q(()=>r("div",{class:"blockTitle"},"球員列表",-1)),Ne=["src"],Ee={class:"block"},Fe=Q(()=>r("div",{class:"blockTitle"},"排行榜",-1)),ze={class:"block"},Ke=Q(()=>r("div",{class:"blockTitle"},"團隊",-1)),We=G({__name:"HomePage",setup(v){const _=b([]),o=b(0),p=b(!1),y=ne(),g=b(0),c=b(0),u=b(0),i=b([]),L=new Date().getFullYear().toString(),m=b([]),B=b("seasonGame"),S=[{value:"seasonGame",label:"季賽"}];function R(){p.value=!0,ae().then(t=>{_.value=t,o.value=t.length,w(t)}).catch(t=>{console.log(t)}).finally(()=>{p.value=!1})}async function w(t){t.forEach(e=>{const n=`${e.name}${e.number}`;te(n,"季賽").then(d=>{let x=d.map(a=>({season:a.season,PA:a.PA,AB:a.AB,SingleB:a.SingleB,DoubleB:a.DoubleB,TripleB:a.TripleB,HR:a.HR,RBI:a.RBI,R:a.R,BB:a.BB,SO:a.SO,GO:a.GO,AO:a.AO,SF:a.SF,SH:a.SH,ERRCH:a.ERRCH,HBP:a.HBP,AVG:a.AVG,OBP:a.OBP,SLG:a.SLG,OPS:a.OPS,SB:a.SB,CS:a.CS,SBP:a.SBP,E:a.E})),A=d.map(a=>({season:a.season,W:a.W,L:a.L,S:a.S,HLD:a.HLD,PC:a.PC,IP:a.IP,K:a.K,strike:a.strike,ball:a.ball,BBPitcher:a.BBPitcher,hits:a.hits,ER:a.ER,RA:a.RA,PE:a.PE,BS:a.BS,K9:a.K9,KBB:a.KBB,PIP:a.PIP,R9:a.R9,BB9:a.BB9,OBA:a.OBA,WHIP:a.WHIP,ERA:a.ERA}));m.value.push(Object.assign(e,{hitter:x,pitcher:A})),j(d)}).catch(d=>{console.log(d)})})}function j(t){i.value.push(...t.filter(e=>e.season===L).map(e=>e))}function O(t){t.name&&y.push({name:"PlayerInfoPage",query:{name:t.name,number:t.number}})}function q(t){g.value=t}function U(t){c.value=t}function J(t){u.value=t}function T(){console.log(B.value)}return R(),(t,e)=>{const n=h("el-table-column"),d=h("el-button"),x=h("el-table"),A=h("el-row"),a=h("el-tab-pane"),Y=h("el-tabs"),f=h("el-option"),N=h("el-select"),E=h("el-empty"),F=K("loading");return H(),M("div",we,[r("div",Oe,[Ye,l(Y,{type:"border-card",class:"tabsCard"},{default:s(()=>[l(a,{label:"球員"},{default:s(()=>[l(A,null,{default:s(()=>[W((H(),D(x,{class:"homePageTable",stripe:"",data:_.value,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:s(()=>[l(n,{fixed:"",prop:"number",label:"No",width:"70",sortable:""}),l(n,{prop:"name",label:"球員",width:"150"},{default:s(({row:k})=>[l(d,{class:"playerNameBtn",text:"",size:"small",onClick:je=>O(k)},{default:s(()=>[r("img",{src:k.img?k.img:"/baseball-analytics/image/icon.jpeg",alt:"player",class:"playerImg"},null,8,Ne),z(" "+P(k.name),1)]),_:2},1032,["onClick"])]),_:1}),l(n,{prop:"age",label:"年齡"}),l(n,{prop:"position",label:"守備位置"})]),_:1},8,["data"])),[[F,p.value]])]),_:1})]),_:1})]),_:1})]),r("div",Ee,[Fe,l(Y,{type:"border-card",class:"rankTabsCard"},{default:s(()=>[l(a,{label:"打擊"},{default:s(()=>[l(N,{modelValue:B.value,"onUpdate:modelValue":e[0]||(e[0]=k=>B.value=k),placeholder:"賽事類型",size:"small",style:{width:"80px"},onChange:T},{default:s(()=>[(H(),M(se,null,re(S,k=>l(f,{key:k.value,label:k.label,value:k.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(Ge,{playersLeagueCareer:m.value,playerLength:o.value},null,8,["playersLeagueCareer","playerLength"]),l(Ve,{playersLeagueCareer:m.value,playerLength:o.value},null,8,["playersLeagueCareer","playerLength"]),l(Ie,{loading:p.value,playersLeagueCareer:m.value,playerLength:o.value,onHandlePlayer:O,onTotalHits:q,onTotalRbis:U,onTotalHrs:J},null,8,["loading","playersLeagueCareer","playerLength"])]),_:1}),l(a,{label:"投手"},{default:s(()=>[l(E,{description:"暫時無資料..."})]),_:1})]),_:1})]),r("div",ze,[Ke,l(ke,{totalHits:g.value,totalRbis:c.value,totalHrs:u.value,thisYearLeagueGame:i.value},null,8,["totalHits","totalRbis","totalHrs","thisYearLeagueGame"])])])}}}),Je=$(We,[["__scopeId","data-v-6bdac4b9"]]);export{Je as default};
