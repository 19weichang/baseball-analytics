import{g as ae,a as te,b as le}from"./index-DcZYtQPo.js";import{d as Y,c as H,a as G,w as l,r as u,o as A,b as t,e as o,t as v,p as Z,f as ee,_ as w,g as E,h as U,i as z,j as h,k as X,u as ne,F as oe,l as se}from"./index-BlckVlPJ.js";const B=p=>(Z("data-v-e8a2752d"),p=p(),ee(),p),re={class:"statisticalCard"},ie=B(()=>o("div",null,"團隊戰績",-1)),ce={class:"teamData"},ue={class:"statisticalCard"},de=B(()=>o("div",null,"團隊安打數",-1)),_e={class:"teamData"},me=B(()=>o("div",null,"本年度安打數",-1)),ge={class:"statisticalCard"},pe=B(()=>o("div",null,"團隊打點數",-1)),he={class:"teamData"},ve=B(()=>o("div",null,"本年度打點數",-1)),be={class:"statisticalCard"},fe=B(()=>o("div",null,"團隊全壘打數",-1)),ye={class:"teamData"},ke=B(()=>o("div",null,"本年度全壘打數",-1)),Le=Y({__name:"statisticalData",props:{totalHits:{},totalRbis:{},totalHrs:{},thisYearLeagueGame:{}},setup(p){const m=p,r=H(()=>Array.isArray(m.thisYearLeagueGame)?m.thisYearLeagueGame.reduce((_,s)=>_+s.SingleB+s.DoubleB+s.TripleB+s.HR,0):0),d=H(()=>Array.isArray(m.thisYearLeagueGame)?m.thisYearLeagueGame.reduce((_,s)=>_+s.RBI,0):0),b=H(()=>Array.isArray(m.thisYearLeagueGame)?m.thisYearLeagueGame.reduce((_,s)=>_+s.HR,0):0);return(_,s)=>{const c=u("el-col"),y=u("el-row");return A(),G(y,null,{default:l(()=>[t(c,{sm:12,md:6},{default:l(()=>[o("div",re,[ie,o("div",ce,v(),1),o("div",null,v(),1)])]),_:1}),t(c,{sm:12,md:6},{default:l(()=>[o("div",ue,[de,o("div",_e,v(_.totalHits),1),me,o("div",null,v(r.value),1)])]),_:1}),t(c,{sm:12,md:6},{default:l(()=>[o("div",ge,[pe,o("div",he,v(_.totalRbis),1),ve,o("div",null,v(d.value),1)])]),_:1}),t(c,{sm:12,md:6},{default:l(()=>[o("div",be,[fe,o("div",ye,v(_.totalHrs),1),ke,o("div",null,v(b.value),1)])]),_:1})]),_:1})}}}),Ce=w(Le,[["__scopeId","data-v-e8a2752d"]]),He=Y({__name:"rankTable",props:{rank:{},loading:{type:Boolean},filterData:{},rankLoading:{type:Boolean}},emits:["handlePlayer"],setup(p,{emit:m}){const r=p,d=m;function b({rowIndex:c}){if(c===0)return{background:"#f0f9eb",color:"#67c23a",fontWeight:"bold"}}function _(){switch(r.rank){case"hit":return"安打";case"rbi":return"打點";case"hr":return"全壘打";case"avg":return"打擊率";case"sb":return"盜壘"}}function s(c){return r.rank==="avg"?c.avg?c.avg.toFixed(3):0 .toFixed(3):c[r.rank]}return(c,y)=>{const k=u("el-table-column"),L=u("el-button"),R=u("el-table"),$=E("loading");return U((A(),G(R,{class:"rankTable",data:r.filterData,style:{width:"100%"},"cell-style":b},{default:l(()=>[t(k,{fixed:"",type:"index",label:"Top",width:"50"}),t(k,{prop:"name",label:"姓名"},{default:l(({row:T})=>[t(L,{class:"playerNameBtn",text:"",size:"small",onClick:V=>d("handlePlayer",T)},{default:l(()=>[z(v(T.name),1)]),_:2},1032,["onClick"])]),_:1}),t(k,{prop:r.rank,label:_()},{default:l(({row:T})=>[z(v(s(T)),1)]),_:1},8,["prop","label"])]),_:1},8,["data"])),[[$,c.rankLoading||c.loading]])}}}),S=w(He,[["__scopeId","data-v-4840737d"]]),Te={class:"playerCardBox"},Pe=["src"],Ae={class:"playerCardText"},Re={class:"playerCardTitle"},$e={class:"playerCardInfo"},De=Y({__name:"playerRank",props:{loading:{type:Boolean},playersLeagueCareer:{},playerLength:{}},emits:["handlePlayer","totalHits","totalRbis","totalHrs","totalAvg","totalSb"],setup(p,{emit:m}){const r=p,d=m,b=h(0),_=h(0),s=h(0),c=h(0),y=h(0),k=h(["1"]),L=H(()=>{if(r.playersLeagueCareer.length!==r.playerLength)return[];const n=r.playersLeagueCareer.map(e=>({name:e.name,hit:Array.isArray(e.hitter)?e.hitter.reduce((a,i)=>a+i.SingleB+i.DoubleB+i.TripleB+i.HR,0):0,number:e.number,image:e.img})).sort((e,a)=>a.hit-e.hit);return R(n),n.slice(0,5)});function R(n){b.value=n.reduce((e,a)=>e+a.hit,0),d("totalHits",b.value)}const $=H(()=>{const n=r.playersLeagueCareer.map(e=>({name:e.name,rbi:Array.isArray(e.hitter)?e.hitter.reduce((a,i)=>a+i.RBI,0):0,number:e.number,image:e.img})).sort((e,a)=>a.rbi-e.rbi);return T(n),n.slice(0,5)});function T(n){_.value=n.reduce((e,a)=>e+a.rbi,0),d("totalRbis",_.value)}const V=H(()=>{const n=r.playersLeagueCareer.map(e=>({name:e.name,hr:Array.isArray(e.hitter)?e.hitter.reduce((a,i)=>a+i.HR,0):0,number:e.number,image:e.img})).sort((e,a)=>a.hr-e.hr);return q(n),n.slice(0,5)});function q(n){s.value=n.reduce((e,a)=>e+a.hr,0),d("totalHrs",s.value)}const W=H(()=>{const n=r.playersLeagueCareer.map(e=>({name:e.name,avg:Array.isArray(e.hitter)?e.hitter.reduce((a,i)=>a+i.AVG,0)/e.hitter.length:0,number:e.number,image:e.img})).sort((e,a)=>a.avg-e.avg);return x(n),n.slice(0,5)});function x(n){c.value=n.reduce((e,a)=>e+a.avg,0)}const J=H(()=>{const n=r.playersLeagueCareer.map(e=>({name:e.name,sb:Array.isArray(e.hitter)?e.hitter.reduce((a,i)=>a+i.SB,0):0,number:e.number,image:e.img})).sort((e,a)=>a.sb-e.sb);return K(n),n.slice(0,5)});function K(n){y.value=n.reduce((e,a)=>e+a.sb,0)}const P=H(()=>r.playersLeagueCareer.length!=r.playerLength);return(n,e)=>{const a=u("el-card"),i=u("el-col"),f=u("el-row"),D=u("el-collapse-item"),M=u("el-collapse"),I=E("loading");return A(),G(M,{modelValue:k.value,"onUpdate:modelValue":e[5]||(e[5]=g=>k.value=g),accordion:""},{default:l(()=>[t(D,{title:"安打 Top5",name:"1"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(f,null,{default:l(()=>[t(i,{md:8},{default:l(()=>[U((A(),G(a,{class:"playerCard"},{default:l(()=>{var g,N,F,j,O;return[o("div",Te,[o("img",{class:"playerCardImg",src:(g=L.value[0])!=null&&g.image?(N=L.value[0])==null?void 0:N.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,Pe),o("div",Ae,[o("div",Re,v(`${(F=L.value[0])==null?void 0:F.name} #${(j=L.value[0])==null?void 0:j.number}`),1),o("div",$e,v(`目前安打數: ${(O=L.value[0])==null?void 0:O.hit}`),1)])])]}),_:1})),[[I,P.value||n.loading]])]),_:1}),t(i,{md:16},{default:l(()=>[t(S,{rank:"hit",loading:n.loading,rankLoading:P.value,filterData:L.value,onHandlePlayer:e[0]||(e[0]=g=>d("handlePlayer",g))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{title:"打點 Top5",name:"2"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(S,{rank:"rbi",loading:n.loading,rankLoading:P.value,filterData:$.value,onHandlePlayer:e[1]||(e[1]=g=>d("handlePlayer",g))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),t(D,{title:"全壘打 Top5",name:"3"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(S,{rank:"hr",loading:n.loading,rankLoading:P.value,filterData:V.value,onHandlePlayer:e[2]||(e[2]=g=>d("handlePlayer",g))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),t(D,{title:"打擊率 Top5",name:"4"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(S,{rank:"avg",loading:n.loading,rankLoading:P.value,filterData:W.value,onHandlePlayer:e[3]||(e[3]=g=>d("handlePlayer",g))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),t(D,{title:"盜壘 Top5",name:"5"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(S,{rank:"sb",loading:n.loading,rankLoading:P.value,filterData:J.value,onHandlePlayer:e[4]||(e[4]=g=>d("handlePlayer",g))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Be=w(De,[["__scopeId","data-v-898778c5"]]),Ge=Y({__name:"hitterRank",props:{playersLeagueCareer:{},playerLength:{}},setup(p){const m=p;function r(b){if(Array.isArray(b)){const s=(b.reduce((c,y)=>c+y.AVG,0)/b.length).toFixed(3);return s==="NaN"?0 .toFixed(3):s}else return 0}const d=H(()=>m.playersLeagueCareer.length!==m.playerLength);return(b,_)=>{const s=u("el-table-column"),c=u("el-table"),y=E("loading");return U((A(),G(c,{class:"rankTable",stripe:"",data:m.playersLeagueCareer,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:l(()=>[t(s,{fixed:"",prop:"number",label:"No",width:"70",sortable:""}),t(s,{prop:"name",label:"球員",width:"100"}),t(s,{prop:"hitter",label:"AVG"},{default:l(({row:k})=>[z(v(r(k.hitter)),1)]),_:1})]),_:1},8,["data"])),[[y,d.value]])}}}),Ie=w(Ge,[["__scopeId","data-v-9668def2"]]),Q=p=>(Z("data-v-85d6abc4"),p=p(),ee(),p),Se={class:"homePage"},Ye={class:"block"},we=Q(()=>o("div",{class:"blockTitle"},"球員列表",-1)),Ve=["src"],xe={class:"block"},Ne=Q(()=>o("div",{class:"blockTitle"},"排行榜",-1)),Fe={class:"block"},je=Q(()=>o("div",{class:"blockTitle"},"團隊",-1)),Oe=Y({__name:"HomePage",setup(p){const m=h([]),r=h(0),d=h(!1),b=h([]),_=ne(),s=h(0),c=h(0),y=h(0),k=h([]),L=new Date().getFullYear().toString(),R=h([]),$=h("seasonGame"),T=[{value:"seasonGame",label:"季賽"}];function V(){d.value=!0,ae().then(e=>{m.value=e,r.value=e.length,q(e)}).catch(e=>{console.log(e)}).finally(()=>{d.value=!1})}async function q(e){e.forEach(a=>{const i=`${a.name}${a.number}`;te(i).then(f=>{b.value.push(Object.assign(a,{hitter:f}))}).catch(f=>{console.log(f)}),le(i,"季賽").then(f=>{R.value.push(Object.assign(a,{hitter:f})),W(f)}).catch(f=>{console.log(f)})})}function W(e){k.value.push(...e.filter(a=>a.season===L).map(a=>a))}function x(e){e.name&&_.push({name:"PlayerInfoPage",query:{name:e.name,number:e.number}})}function J(e){s.value=e}function K(e){c.value=e}function P(e){y.value=e}function n(){console.log($.value)}return V(),(e,a)=>{const i=u("el-table-column"),f=u("el-button"),D=u("el-table"),M=u("el-row"),I=u("el-tab-pane"),g=u("el-tabs"),N=u("el-option"),F=u("el-select"),j=u("el-empty"),O=E("loading");return A(),X("div",Se,[o("div",Ye,[we,t(g,{type:"border-card",class:"tabsCard"},{default:l(()=>[t(I,{label:"球員"},{default:l(()=>[t(M,null,{default:l(()=>[U((A(),G(D,{class:"homePageTable",stripe:"",data:m.value,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:l(()=>[t(i,{fixed:"",prop:"number",label:"No",width:"70",sortable:""}),t(i,{prop:"name",label:"球員",width:"150"},{default:l(({row:C})=>[t(f,{class:"playerNameBtn",text:"",size:"small",onClick:ze=>x(C)},{default:l(()=>[o("img",{src:C.img?C.img:"/baseball-analytics/image/icon.jpeg",alt:"player",class:"playerImg"},null,8,Ve),z(" "+v(C.name),1)]),_:2},1032,["onClick"])]),_:1}),t(i,{prop:"age",label:"年齡"}),t(i,{prop:"position",label:"守備位置"})]),_:1},8,["data"])),[[O,d.value]])]),_:1})]),_:1})]),_:1})]),o("div",xe,[Ne,t(g,{type:"border-card",class:"rankTabsCard"},{default:l(()=>[t(I,{label:"打擊"},{default:l(()=>[t(F,{modelValue:$.value,"onUpdate:modelValue":a[0]||(a[0]=C=>$.value=C),placeholder:"賽事類型",size:"small",style:{width:"80px"},onChange:n},{default:l(()=>[(A(),X(oe,null,se(T,C=>t(N,{key:C.value,label:C.label,value:C.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(Ie,{playersLeagueCareer:R.value,playerLength:r.value},null,8,["playersLeagueCareer","playerLength"]),t(Be,{loading:d.value,playersLeagueCareer:R.value,playerLength:r.value,onHandlePlayer:x,onTotalHits:J,onTotalRbis:K,onTotalHrs:P},null,8,["loading","playersLeagueCareer","playerLength"])]),_:1}),t(I,{label:"投手"},{default:l(()=>[t(j,{description:"暫時無資料..."})]),_:1})]),_:1})]),o("div",Fe,[je,t(Ce,{totalHits:s.value,totalRbis:c.value,totalHrs:y.value,thisYearLeagueGame:k.value},null,8,["totalHits","totalRbis","totalHrs","thisYearLeagueGame"])])])}}}),qe=w(Oe,[["__scopeId","data-v-85d6abc4"]]);export{qe as default};
