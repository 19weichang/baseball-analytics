import{q as le,g as se,a as ne}from"./vue3-apexcharts-CZfOa2zF.js";import{d as z,c as O,a as x,w as n,r as f,o as $,b as s,e as l,t as _,p as ae,f as te,_ as K,g as J,h as N,i as U,j as P,k as q,u as re,l as oe,F as X,m as Z}from"./index-Bshz6Rny.js";const E=C=>(ae("data-v-e8a2752d"),C=C(),te(),C),ie={class:"statisticalCard"},ce=E(()=>l("div",null,"團隊戰績",-1)),ue={class:"teamData"},de={class:"statisticalCard"},_e=E(()=>l("div",null,"團隊安打數",-1)),pe={class:"teamData"},ge=E(()=>l("div",null,"本年度安打數",-1)),ve={class:"statisticalCard"},he=E(()=>l("div",null,"團隊打點數",-1)),me={class:"teamData"},ye=E(()=>l("div",null,"本年度打點數",-1)),fe={class:"statisticalCard"},be=E(()=>l("div",null,"團隊全壘打數",-1)),Ce={class:"teamData"},Pe=E(()=>l("div",null,"本年度全壘打數",-1)),Le=z({__name:"statisticalData",props:{totalHits:{},totalRbis:{},totalHrs:{},thisYearLeagueGame:{}},setup(C){const p=C,u=O(()=>Array.isArray(p.thisYearLeagueGame)?p.thisYearLeagueGame.reduce((d,g)=>d+g.SingleB+g.DoubleB+g.TripleB+g.HR,0):0),v=O(()=>Array.isArray(p.thisYearLeagueGame)?p.thisYearLeagueGame.reduce((d,g)=>d+g.RBI,0):0),I=O(()=>Array.isArray(p.thisYearLeagueGame)?p.thisYearLeagueGame.reduce((d,g)=>d+g.HR,0):0);return(d,g)=>{const c=f("el-col"),S=f("el-row");return $(),x(S,null,{default:n(()=>[s(c,{sm:12,md:6},{default:n(()=>[l("div",ie,[ce,l("div",ue,_(),1),l("div",null,_(),1)])]),_:1}),s(c,{sm:12,md:6},{default:n(()=>[l("div",de,[_e,l("div",pe,_(d.totalHits),1),ge,l("div",null,_(u.value),1)])]),_:1}),s(c,{sm:12,md:6},{default:n(()=>[l("div",ve,[he,l("div",me,_(d.totalRbis),1),ye,l("div",null,_(v.value),1)])]),_:1}),s(c,{sm:12,md:6},{default:n(()=>[l("div",fe,[be,l("div",Ce,_(d.totalHrs),1),Pe,l("div",null,_(I.value),1)])]),_:1})]),_:1})}}}),ke=K(Le,[["__scopeId","data-v-e8a2752d"]]),Ae=z({__name:"rankTable",props:{rank:{},loading:{type:Boolean},filterData:{},rankLoading:{type:Boolean}},emits:["handlePlayer"],setup(C,{emit:p}){const u=C,v=p;function I({rowIndex:c}){if(c===0)return{background:"#f0f9eb",color:"#67c23a",fontWeight:"bold"}}function d(){switch(u.rank){case"hit":return"安打";case"rbi":return"打點";case"hr":return"全壘打";case"avg":return"打擊率";case"sb":return"盜壘"}}function g(c){return u.rank==="avg"?c.avg?c.avg.toFixed(3):0 .toFixed(3):c[u.rank]}return(c,S)=>{const L=f("el-table-column"),h=f("el-button"),i=f("el-table"),m=J("loading");return N(($(),x(i,{class:"rankTable",data:u.filterData,style:{width:"100%"},"cell-style":I},{default:n(()=>[s(L,{fixed:"",type:"index",label:"Top",width:"50"}),s(L,{prop:"name",label:"姓名"},{default:n(({row:y})=>[s(h,{class:"playerNameBtn",text:"",size:"small",onClick:H=>v("handlePlayer",y)},{default:n(()=>[U(_(y.name),1)]),_:2},1032,["onClick"])]),_:1}),s(L,{prop:u.rank,label:d()},{default:n(({row:y})=>[U(_(g(y)),1)]),_:1},8,["prop","label"])]),_:1},8,["data"])),[[m,c.rankLoading||c.loading]])}}}),j=K(Ae,[["__scopeId","data-v-4840737d"]]),Be={class:"playerCardBox"},Te=["src"],$e={class:"playerCardText"},Se={class:"playerCardTitle"},He={class:"playerCardInfo"},Re={class:"playerCardBox"},Ie=["src"],Ge={class:"playerCardText"},Oe={class:"playerCardTitle"},xe={class:"playerCardInfo"},De={class:"playerCardBox"},Ve=["src"],we={class:"playerCardText"},Fe={class:"playerCardTitle"},Ne={class:"playerCardInfo"},Ye={class:"playerCardBox"},Ee=["src"],ze={class:"playerCardText"},Ke={class:"playerCardTitle"},We={class:"playerCardInfo"},je={class:"playerCardBox"},qe=["src"],Ue={class:"playerCardText"},Je={class:"playerCardTitle"},Me={class:"playerCardInfo"},Qe=z({__name:"playerRank",props:{loading:{type:Boolean},playersLeagueCareer:{},playerLength:{}},emits:["handlePlayer","totalHits","totalRbis","totalHrs","totalAvg","totalSb"],setup(C,{emit:p}){const u=C,v=p,I=P(0),d=P(0),g=P(0),c=P(0),S=P(0),L=P(["1"]),h=O(()=>{if(u.playersLeagueCareer.length!==u.playerLength)return[];const r=u.playersLeagueCareer.map(a=>({name:a.name,hit:Array.isArray(a.hitter)?a.hitter.reduce((t,o)=>t+o.SingleB+o.DoubleB+o.TripleB+o.HR,0):0,number:a.number,image:a.img})).sort((a,t)=>t.hit-a.hit);return i(r),r.slice(0,5)});function i(r){I.value=r.reduce((a,t)=>a+t.hit,0),v("totalHits",I.value)}const m=O(()=>{const r=u.playersLeagueCareer.map(a=>({name:a.name,rbi:Array.isArray(a.hitter)?a.hitter.reduce((t,o)=>t+o.RBI,0):0,number:a.number,image:a.img})).sort((a,t)=>t.rbi-a.rbi);return y(r),r.slice(0,5)});function y(r){d.value=r.reduce((a,t)=>a+t.rbi,0),v("totalRbis",d.value)}const H=O(()=>{const r=u.playersLeagueCareer.map(a=>({name:a.name,hr:Array.isArray(a.hitter)?a.hitter.reduce((t,o)=>t+o.HR,0):0,number:a.number,image:a.img})).sort((a,t)=>t.hr-a.hr);return Y(r),r.slice(0,5)});function Y(r){g.value=r.reduce((a,t)=>a+t.hr,0),v("totalHrs",g.value)}const F=O(()=>{const r=u.playersLeagueCareer.map(a=>({name:a.name,avg:Array.isArray(a.hitter)?a.hitter.reduce((t,o)=>t+o.AVG,0)/a.hitter.length:0,number:a.number,image:a.img})).sort((a,t)=>t.avg-a.avg);return M(r),r.slice(0,5)});function M(r){c.value=r.reduce((a,t)=>a+t.avg,0)}const V=O(()=>{const r=u.playersLeagueCareer.map(a=>({name:a.name,sb:Array.isArray(a.hitter)?a.hitter.reduce((t,o)=>t+o.SB,0):0,number:a.number,image:a.img})).sort((a,t)=>t.sb-a.sb);return Q(r),r.slice(0,5)});function Q(r){S.value=r.reduce((a,t)=>a+t.sb,0)}const G=O(()=>u.playersLeagueCareer.length!=u.playerLength);return(r,a)=>{const t=f("el-card"),o=f("el-col"),w=f("el-row"),R=f("el-collapse-item"),W=f("el-collapse"),D=J("loading");return $(),x(W,{modelValue:L.value,"onUpdate:modelValue":a[5]||(a[5]=e=>L.value=e),accordion:""},{default:n(()=>[s(R,{title:"安打 Top5",name:"1"},{default:n(()=>[s(t,{class:"rankCard"},{default:n(()=>[s(w,null,{default:n(()=>[s(o,{md:8},{default:n(()=>[N(($(),x(t,{class:"playerCard"},{default:n(()=>{var e,k,A,B,T;return[l("div",Be,[l("img",{class:"playerCardImg",src:(e=h.value[0])!=null&&e.image?(k=h.value[0])==null?void 0:k.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,Te),l("div",$e,[l("div",Se,_(`${(A=h.value[0])==null?void 0:A.name} #${(B=h.value[0])==null?void 0:B.number}`),1),l("div",He,_(`目前安打數: ${(T=h.value[0])==null?void 0:T.hit}`),1)])])]}),_:1})),[[D,G.value||r.loading]])]),_:1}),s(o,{md:16},{default:n(()=>[s(j,{rank:"hit",loading:r.loading,rankLoading:G.value,filterData:h.value,onHandlePlayer:a[0]||(a[0]=e=>v("handlePlayer",e))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),s(R,{title:"打點 Top5",name:"2"},{default:n(()=>[s(t,{class:"rankCard"},{default:n(()=>[s(w,null,{default:n(()=>[s(o,{md:8},{default:n(()=>[N(($(),x(t,{class:"playerCard"},{default:n(()=>{var e,k,A,B,T;return[l("div",Re,[l("img",{class:"playerCardImg",src:(e=m.value[0])!=null&&e.image?(k=m.value[0])==null?void 0:k.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,Ie),l("div",Ge,[l("div",Oe,_(`${(A=m.value[0])==null?void 0:A.name} #${(B=m.value[0])==null?void 0:B.number}`),1),l("div",xe,_(`目前打點: ${(T=m.value[0])==null?void 0:T.rbi}`),1)])])]}),_:1})),[[D,G.value||r.loading]])]),_:1}),s(o,{md:16},{default:n(()=>[s(j,{rank:"rbi",loading:r.loading,rankLoading:G.value,filterData:m.value,onHandlePlayer:a[1]||(a[1]=e=>v("handlePlayer",e))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),s(R,{title:"全壘打 Top5",name:"3"},{default:n(()=>[s(t,{class:"rankCard"},{default:n(()=>[s(w,null,{default:n(()=>[s(o,{md:8},{default:n(()=>[N(($(),x(t,{class:"playerCard"},{default:n(()=>{var e,k,A,B,T;return[l("div",De,[l("img",{class:"playerCardImg",src:(e=H.value[0])!=null&&e.image?(k=H.value[0])==null?void 0:k.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,Ve),l("div",we,[l("div",Fe,_(`${(A=H.value[0])==null?void 0:A.name} #${(B=H.value[0])==null?void 0:B.number}`),1),l("div",Ne,_(`目前全壘打: ${(T=H.value[0])==null?void 0:T.hr}`),1)])])]}),_:1})),[[D,G.value||r.loading]])]),_:1}),s(o,{md:16},{default:n(()=>[s(j,{rank:"hr",loading:r.loading,rankLoading:G.value,filterData:H.value,onHandlePlayer:a[2]||(a[2]=e=>v("handlePlayer",e))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),s(R,{title:"打擊率 Top5",name:"4"},{default:n(()=>[s(t,{class:"rankCard"},{default:n(()=>[s(w,null,{default:n(()=>[s(o,{md:8},{default:n(()=>[N(($(),x(t,{class:"playerCard"},{default:n(()=>{var e,k,A,B,T;return[l("div",Ye,[l("img",{class:"playerCardImg",src:(e=F.value[0])!=null&&e.image?(k=F.value[0])==null?void 0:k.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,Ee),l("div",ze,[l("div",Ke,_(`${(A=F.value[0])==null?void 0:A.name} #${(B=F.value[0])==null?void 0:B.number}`),1),l("div",We,_(`目前打擊率: ${(T=F.value[0])==null?void 0:T.avg.toFixed(3)}`),1)])])]}),_:1})),[[D,G.value||r.loading]])]),_:1}),s(o,{md:16},{default:n(()=>[s(j,{rank:"avg",loading:r.loading,rankLoading:G.value,filterData:F.value,onHandlePlayer:a[3]||(a[3]=e=>v("handlePlayer",e))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),s(R,{title:"盜壘 Top5",name:"5"},{default:n(()=>[s(t,{class:"rankCard"},{default:n(()=>[s(w,null,{default:n(()=>[s(o,{md:8},{default:n(()=>[N(($(),x(t,{class:"playerCard"},{default:n(()=>{var e,k,A,B,T;return[l("div",je,[l("img",{class:"playerCardImg",src:(e=V.value[0])!=null&&e.image?(k=V.value[0])==null?void 0:k.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,qe),l("div",Ue,[l("div",Je,_(`${(A=V.value[0])==null?void 0:A.name} #${(B=V.value[0])==null?void 0:B.number}`),1),l("div",Me,_(`目前盜壘: ${(T=V.value[0])==null?void 0:T.sb}`),1)])])]}),_:1})),[[D,G.value||r.loading]])]),_:1}),s(o,{md:16},{default:n(()=>[s(j,{rank:"sb",loading:r.loading,rankLoading:G.value,filterData:V.value,onHandlePlayer:a[4]||(a[4]=e=>v("handlePlayer",e))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Xe=K(Qe,[["__scopeId","data-v-d415a8cf"]]),Ze=z({__name:"hitterRank",props:{playersLeagueCareer:{},playerLength:{}},setup(C){const p=C;function u(d){if(Array.isArray(d)){const c=(d.reduce((S,L)=>S+L.AVG,0)/d.length).toFixed(3);return c==="NaN"?0 .toFixed(3):c}else return 0}function v(d){if(Array.isArray(d)){const c=(d.reduce((S,L)=>S+L.OPS,0)/d.length).toFixed(3);return c==="NaN"?0 .toFixed(3):c}else return 0}const I=O(()=>p.playersLeagueCareer.length!==p.playerLength);return(d,g)=>{const c=f("el-table-column"),S=f("el-table"),L=J("loading");return N(($(),x(S,{class:"rankTable",stripe:"",data:p.playersLeagueCareer,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:n(()=>[s(c,{fixed:"",prop:"number",label:"No",width:"70",sortable:""}),s(c,{prop:"name",label:"球員",width:"100"}),s(c,{prop:"hitter",label:"AVG",sortable:""},{default:n(({row:h})=>[U(_(u(h.hitter)),1)]),_:1}),s(c,{prop:"hitter",label:"OPS"},{default:n(({row:h})=>[U(_(v(h.hitter)),1)]),_:1})]),_:1},8,["data"])),[[L,I.value]])}}}),ea=K(Ze,[["__scopeId","data-v-5b7eb2ac"]]),aa={id:"hitterScatterChart"},ta=z({__name:"hitterChart",props:{playersLeagueCareer:{},playerLength:{},chartType:{}},setup(C){const p=C,u=P([]),v=O(()=>{if(p.playersLeagueCareer.length===p.playerLength)switch(p.chartType){case"AVG":return I();case"OPS":return d();default:return[]}else return[]});function I(){return p.playersLeagueCareer.map(i=>{const m=c(i.hitter),y=L(i.hitter);return g(i),{name:i.name,data:[[y,m]]}})}function d(){return p.playersLeagueCareer.map(i=>{const m=S(i.hitter),y=L(i.hitter);return g(i),{name:i.name,data:[[y,m]]}})}function g(i){i.img?u.value.push(i.img):u.value.push("https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png")}function c(i){if(Array.isArray(i)){const y=(i.reduce((H,Y)=>H+Y.AVG,0)/i.length).toFixed(3);return y==="NaN"?0 .toFixed(3):y}else return 0}function S(i){if(Array.isArray(i)){const y=(i.reduce((H,Y)=>H+Y.OPS,0)/i.length).toFixed(3);return y==="NaN"?0 .toFixed(3):y}else return 0}function L(i){return Array.isArray(i)?i.reduce((y,H)=>y+H.PA,0):0}const h=P({series:v,chartOptions:{chart:{height:350,type:"scatter",animations:{enabled:!1},zoom:{enabled:!1},toolbar:{show:!1}},colors:["black"],xaxis:{tickAmount:10,min:0},yaxis:{tickAmount:7},markers:{colors:["green"],size:15,discrete:[{seriesIndex:0,dataPointIndex:1,fillColor:"#111",strokeColor:"#eee",size:8}]},fill:{type:"image",opacity:1,image:{src:u.value,width:30,height:30}},legend:{labels:{useSeriesColors:!0}}}});return(i,m)=>($(),q("div",aa,[s(re(le),{type:"scatter",height:"350",options:h.value.chartOptions,series:h.value.series},null,8,["options","series"])]))}}),la=K(ta,[["__scopeId","data-v-7f03bd75"]]),ee=C=>(ae("data-v-00bc8f83"),C=C(),te(),C),sa={class:"homePage"},na={class:"block"},ra=ee(()=>l("div",{class:"blockTitle"},"球員列表",-1)),oa={class:"playerInfo"},ia=["src"],ca={class:"cardTitle"},ua={class:"title"},da={class:"title"},_a={class:"block"},pa=ee(()=>l("div",{class:"blockTitle"},"排行榜",-1)),ga={class:"selectGroup"},va={class:"block"},ha=ee(()=>l("div",{class:"blockTitle"},"團隊",-1)),ma=z({__name:"HomePage",setup(C){const p=P([]),u=P(0),v=P(!1),I=oe(),d=P(0),g=P(0),c=P(0),S=P([]),L=new Date().getFullYear().toString(),h=P([]),i=P("seasonGame"),m=P("AVG"),y=[{value:"seasonGame",label:"季賽"}],H=[{value:"AVG",label:"打擊率"},{value:"OPS",label:"OPS"}];function Y(){v.value=!0,se().then(t=>{p.value=t,u.value=t.length,F(t)}).catch(t=>{console.log(t)}).finally(()=>{v.value=!1})}async function F(t){t.forEach(o=>{const w=`${o.name}${o.number}`;ne(w,"季賽").then(R=>{let W=R.map(e=>({season:e.season,PA:e.PA,AB:e.AB,SingleB:e.SingleB,DoubleB:e.DoubleB,TripleB:e.TripleB,HR:e.HR,RBI:e.RBI,R:e.R,BB:e.BB,SO:e.SO,GO:e.GO,AO:e.AO,SF:e.SF,SH:e.SH,ERRCH:e.ERRCH,HBP:e.HBP,AVG:e.AVG,OBP:e.OBP,SLG:e.SLG,OPS:e.OPS,SB:e.SB,CS:e.CS,SBP:e.SBP,E:e.E})),D=R.map(e=>({season:e.season,W:e.W,L:e.L,S:e.S,HLD:e.HLD,PC:e.PC,IP:e.IP,K:e.K,strike:e.strike,ball:e.ball,BBPitcher:e.BBPitcher,hits:e.hits,ER:e.ER,RA:e.RA,PE:e.PE,BS:e.BS,K9:e.K9,KBB:e.KBB,PIP:e.PIP,R9:e.R9,BB9:e.BB9,OBA:e.OBA,WHIP:e.WHIP,ERA:e.ERA}));h.value.push(Object.assign(o,{hitter:W,pitcher:D})),M(R)}).catch(R=>{console.log(R)})})}function M(t){S.value.push(...t.filter(o=>o.season===L).map(o=>o))}function V(t){t.name&&I.push({name:"PlayerInfoPage",query:{name:t.name,number:t.number}})}function Q(t){d.value=t}function G(t){g.value=t}function r(t){c.value=t}function a(){console.log(i.value)}return Y(),(t,o)=>{const w=f("el-card"),R=f("el-col"),W=f("el-row"),D=f("el-option"),e=f("el-select"),k=f("el-tab-pane"),A=f("el-empty"),B=f("el-tabs"),T=J("loading");return $(),q("div",sa,[l("div",na,[ra,l("div",null,[N(($(),x(W,null,{default:n(()=>[($(!0),q(X,null,Z(p.value,b=>($(),x(R,{xs:12,sm:8,md:6,key:b.number},{default:n(()=>[s(w,{shadow:"hover",class:"playerCard",onClick:ya=>V(b)},{default:n(()=>[l("div",oa,[l("img",{src:b.img?b.img:"/baseball-analytics/image/icon.jpeg",alt:"player",class:"playerImg"},null,8,ia),l("div",ca,[l("div",ua,_(`${b.name} #${b.number}`),1),l("div",da,_(b.position),1)])])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})),[[T,v.value]])])]),l("div",_a,[pa,s(B,{type:"border-card",class:"rankTabsCard"},{default:n(()=>[s(k,{label:"打擊"},{default:n(()=>[l("div",ga,[s(e,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=b=>i.value=b),placeholder:"賽事類型",size:"small",style:{width:"80px"},onChange:a},{default:n(()=>[($(),q(X,null,Z(y,b=>s(D,{key:b.value,label:b.label,value:b.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),s(e,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=b=>m.value=b),placeholder:"數據類型",size:"small",style:{width:"80px"}},{default:n(()=>[($(),q(X,null,Z(H,b=>s(D,{key:b.value,label:b.label,value:b.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),s(ea,{playersLeagueCareer:h.value,playerLength:u.value},null,8,["playersLeagueCareer","playerLength"]),s(la,{playersLeagueCareer:h.value,playerLength:u.value,chartType:m.value},null,8,["playersLeagueCareer","playerLength","chartType"]),s(Xe,{loading:v.value,playersLeagueCareer:h.value,playerLength:u.value,onHandlePlayer:V,onTotalHits:Q,onTotalRbis:G,onTotalHrs:r},null,8,["loading","playersLeagueCareer","playerLength"])]),_:1}),s(k,{label:"投手"},{default:n(()=>[s(A,{description:"暫時無資料..."})]),_:1})]),_:1})]),l("div",va,[ha,s(ke,{totalHits:d.value,totalRbis:g.value,totalHrs:c.value,thisYearLeagueGame:S.value},null,8,["totalHits","totalRbis","totalHrs","thisYearLeagueGame"])])])}}}),Ca=K(ma,[["__scopeId","data-v-00bc8f83"]]);export{Ca as default};
