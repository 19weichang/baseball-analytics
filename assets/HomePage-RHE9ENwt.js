import{g as Z,a as ee,b as ae}from"./index-DcZYtQPo.js";import{d as N,c as H,a as S,w as n,r as c,o as Y,b as a,e as s,t as v,p as K,f as M,_ as V,g as O,h as z,i as Q,j as _,k as te,u as le}from"./index-7WCtHxXQ.js";const B=m=>(K("data-v-e8a2752d"),m=m(),M(),m),ne={class:"statisticalCard"},se=B(()=>s("div",null,"團隊戰績",-1)),oe={class:"teamData"},re={class:"statisticalCard"},ie=B(()=>s("div",null,"團隊安打數",-1)),ce={class:"teamData"},de=B(()=>s("div",null,"本年度安打數",-1)),ue={class:"statisticalCard"},_e=B(()=>s("div",null,"團隊打點數",-1)),me={class:"teamData"},ge=B(()=>s("div",null,"本年度打點數",-1)),pe={class:"statisticalCard"},he=B(()=>s("div",null,"團隊全壘打數",-1)),be={class:"teamData"},ve=B(()=>s("div",null,"本年度全壘打數",-1)),fe=N({__name:"statisticalData",props:{totalHits:{},totalRbis:{},totalHrs:{},thisYearLeagueGame:{}},setup(m){const h=m,o=H(()=>Array.isArray(h.thisYearLeagueGame)?h.thisYearLeagueGame.reduce((u,r)=>u+r.SingleB+r.DoubleB+r.TripleB+r.HR,0):0),g=H(()=>Array.isArray(h.thisYearLeagueGame)?h.thisYearLeagueGame.reduce((u,r)=>u+r.RBI,0):0),D=H(()=>Array.isArray(h.thisYearLeagueGame)?h.thisYearLeagueGame.reduce((u,r)=>u+r.HR,0):0);return(u,r)=>{const L=c("el-col"),C=c("el-row");return Y(),S(C,null,{default:n(()=>[a(L,{sm:12,md:6},{default:n(()=>[s("div",ne,[se,s("div",oe,v(),1),s("div",null,v(),1)])]),_:1}),a(L,{sm:12,md:6},{default:n(()=>[s("div",re,[ie,s("div",ce,v(u.totalHits),1),de,s("div",null,v(o.value),1)])]),_:1}),a(L,{sm:12,md:6},{default:n(()=>[s("div",ue,[_e,s("div",me,v(u.totalRbis),1),ge,s("div",null,v(g.value),1)])]),_:1}),a(L,{sm:12,md:6},{default:n(()=>[s("div",pe,[he,s("div",be,v(u.totalHrs),1),ve,s("div",null,v(D.value),1)])]),_:1})]),_:1})}}}),ye=V(fe,[["__scopeId","data-v-e8a2752d"]]),ke=N({__name:"rankTable",props:{rank:{},loading:{type:Boolean},filterData:{},rankLoading:{type:Boolean}},emits:["handlePlayer"],setup(m,{emit:h}){const o=m,g=h;function D({rowIndex:r}){if(r===0)return{background:"#f0f9eb",color:"#67c23a",fontWeight:"bold"}}function u(){switch(o.rank){case"hit":return"安打";case"rbi":return"打點";case"hr":return"全壘打";case"avg":return"打擊率";case"sb":return"盜壘"}}return(r,L)=>{const C=c("el-table-column"),$=c("el-button"),y=c("el-table"),A=O("loading");return z((Y(),S(y,{class:"rankTable",data:o.filterData,style:{width:"100%"},"cell-style":D},{default:n(()=>[a(C,{fixed:"",type:"index",label:"Top",width:"50"}),a(C,{prop:"name",label:"姓名"},{default:n(({row:R})=>[a($,{class:"playerNameBtn",text:"",size:"small",onClick:w=>g("handlePlayer",R)},{default:n(()=>[Q(v(R.name),1)]),_:2},1032,["onClick"])]),_:1}),a(C,{prop:o.rank,label:u()},null,8,["prop","label"])]),_:1},8,["data"])),[[A,r.rankLoading||r.loading]])}}}),I=V(ke,[["__scopeId","data-v-11f2ebba"]]),Le={class:"playerCardBox"},Ce=["src"],Pe={class:"playerCardText"},He={class:"playerCardTitle"},Te={class:"playerCardInfo"},De=N({__name:"playerRank",props:{loading:{type:Boolean},playersLeagueCareer:{},playerLength:{}},emits:["handlePlayer"],setup(m,{emit:h}){const o=m,g=h,D=_(0),u=_(0),r=_(0),L=_(0),C=_(0),$=_(["1"]),y=H(()=>{if(o.playersLeagueCareer.length!==o.playerLength)return[];const l=o.playersLeagueCareer.map(e=>({name:e.name,hit:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.SingleB+i.DoubleB+i.TripleB+i.HR,0):0,number:e.number,image:e.img})).sort((e,t)=>t.hit-e.hit);return A(l),l.slice(0,5)});function A(l){D.value=l.reduce((e,t)=>e+t.hit,0)}const R=H(()=>{const l=o.playersLeagueCareer.map(e=>({name:e.name,rbi:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.RBI,0):0,number:e.number,image:e.img})).sort((e,t)=>t.rbi-e.rbi);return w(l),l.slice(0,5)});function w(l){u.value=l.reduce((e,t)=>e+t.rbi,0)}const x=H(()=>{const l=o.playersLeagueCareer.map(e=>({name:e.name,hr:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.HR,0):0,number:e.number,image:e.img})).sort((e,t)=>t.hr-e.hr);return G(l),l.slice(0,5)});function G(l){r.value=l.reduce((e,t)=>e+t.hr,0)}const d=H(()=>{const l=o.playersLeagueCareer.map(e=>({name:e.name,avg:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.AVG,0)/e.hitter.length:0,number:e.number,image:e.img})).sort((e,t)=>t.avg-e.avg);return f(l),l.slice(0,5)});function f(l){L.value=l.reduce((e,t)=>e+t.avg,0)}const P=H(()=>{const l=o.playersLeagueCareer.map(e=>({name:e.name,sb:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.SB,0):0,number:e.number,image:e.img})).sort((e,t)=>t.sb-e.sb);return b(l),l.slice(0,5)});function b(l){C.value=l.reduce((e,t)=>e+t.sb,0)}const T=H(()=>o.playersLeagueCareer.length!=o.playerLength);return(l,e)=>{const t=c("el-card"),i=c("el-col"),j=c("el-row"),k=c("el-collapse-item"),q=c("el-collapse"),X=O("loading");return Y(),S(q,{modelValue:$.value,"onUpdate:modelValue":e[5]||(e[5]=p=>$.value=p)},{default:n(()=>[a(k,{title:"安打 Top5",name:"1"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(j,null,{default:n(()=>[a(i,{md:8},{default:n(()=>[z((Y(),S(t,{class:"playerCard"},{default:n(()=>{var p,F,U,W,J;return[s("div",Le,[s("img",{class:"playerCardImg",src:(p=y.value[0])!=null&&p.image?(F=y.value[0])==null?void 0:F.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,Ce),s("div",Pe,[s("div",He,v(`${(U=y.value[0])==null?void 0:U.name} #${(W=y.value[0])==null?void 0:W.number}`),1),s("div",Te,v(`目前安打數: ${(J=y.value[0])==null?void 0:J.hit}`),1)])])]}),_:1})),[[X,T.value||l.loading]])]),_:1}),a(i,{md:16},{default:n(()=>[a(I,{rank:"hit",loading:l.loading,rankLoading:T.value,filterData:y.value,onHandlePlayer:e[0]||(e[0]=p=>g("handlePlayer",p))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),a(k,{title:"打點 Top5",name:"2"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(I,{rank:"rbi",loading:l.loading,rankLoading:T.value,filterData:R.value,onHandlePlayer:e[1]||(e[1]=p=>g("handlePlayer",p))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),a(k,{title:"全壘打 Top5",name:"3"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(I,{rank:"hr",loading:l.loading,rankLoading:T.value,filterData:x.value,onHandlePlayer:e[2]||(e[2]=p=>g("handlePlayer",p))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),a(k,{title:"打擊率 Top5",name:"4"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(I,{rank:"avg",loading:l.loading,rankLoading:T.value,filterData:d.value,onHandlePlayer:e[3]||(e[3]=p=>g("handlePlayer",p))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),a(k,{title:"盜壘 Top5",name:"5"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(I,{rank:"sb",loading:l.loading,rankLoading:T.value,filterData:P.value,onHandlePlayer:e[4]||(e[4]=p=>g("handlePlayer",p))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),$e=V(De,[["__scopeId","data-v-a9848a33"]]),E=m=>(K("data-v-1f9925a4"),m=m(),M(),m),Be={class:"homePage"},Ae={class:"block"},Re=E(()=>s("div",{class:"blockTitle"},"球員列表",-1)),Ye=["src"],Ie={class:"block"},Se=E(()=>s("div",{class:"blockTitle"},"排行榜",-1)),we={class:"block"},Ge=E(()=>s("div",{class:"blockTitle"},"團隊",-1)),Ne=N({__name:"HomePage",setup(m){const h=_([]),o=_(0),g=_(!1),D=_([]),u=le(),r=_(0),L=_(0),C=_(0),$=_([]),y=new Date().getFullYear().toString(),A=_([]);function R(){g.value=!0,Z().then(d=>{h.value=d,o.value=d.length,w(d)}).catch(d=>{console.log(d)}).finally(()=>{g.value=!1})}async function w(d){d.forEach(f=>{const P=`${f.name}${f.number}`;ee(P).then(b=>{D.value.push(Object.assign(f,{hitter:b}))}).catch(b=>{console.log(b)}),ae(P,"季賽").then(b=>{A.value.push(Object.assign(f,{hitter:b})),x(b)}).catch(b=>{console.log(b)})})}function x(d){$.value.push(...d.filter(f=>f.season===y).map(f=>f))}function G(d){d.name&&u.push({name:"PlayerInfoPage",query:{name:d.name,number:d.number}})}return R(),(d,f)=>{const P=c("el-table-column"),b=c("el-button"),T=c("el-table"),l=c("el-row"),e=c("el-tab-pane"),t=c("el-empty"),i=c("el-tabs"),j=O("loading");return Y(),te("div",Be,[s("div",Ae,[Re,a(i,{type:"border-card",class:"tabsCard"},{default:n(()=>[a(e,{label:"打者"},{default:n(()=>[a(l,null,{default:n(()=>[z((Y(),S(T,{class:"homePageTable",stripe:"",data:h.value,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:n(()=>[a(P,{fixed:"",prop:"number",label:"No",width:"50"}),a(P,{prop:"name",label:"球員",width:"150"},{default:n(({row:k})=>[a(b,{class:"playerNameBtn",text:"",size:"small",onClick:q=>G(k)},{default:n(()=>[s("img",{src:k.img?k.img:"/baseball-analytics/image/icon.jpeg",alt:"player",class:"playerImg"},null,8,Ye),Q(" "+v(k.name),1)]),_:2},1032,["onClick"])]),_:1}),a(P,{prop:"age",label:"年齡"}),a(P,{prop:"position",label:"守備位置"})]),_:1},8,["data"])),[[j,g.value]])]),_:1})]),_:1}),a(e,{label:"投手"},{default:n(()=>[a(t,{description:"暫時無資料..."})]),_:1})]),_:1})]),s("div",Ie,[Se,a(i,{type:"border-card",class:"rankTabsCard"},{default:n(()=>[a(e,{label:"打擊"},{default:n(()=>[a($e,{loading:g.value,playersLeagueCareer:A.value,playerLength:o.value,onHandlePlayer:G},null,8,["loading","playersLeagueCareer","playerLength"])]),_:1}),a(e,{label:"投手"},{default:n(()=>[a(t,{description:"暫時無資料..."})]),_:1})]),_:1})]),s("div",we,[Ge,a(ye,{totalHits:r.value,totalRbis:L.value,totalHrs:C.value,thisYearLeagueGame:$.value},null,8,["totalHits","totalRbis","totalHrs","thisYearLeagueGame"])])])}}}),je=V(Ne,[["__scopeId","data-v-1f9925a4"]]);export{je as default};
