import{d as q,j as L,n as k,c as ee,r as b,o as P,k as A,e as C,b as a,w as i,F as N,m as U,_ as E,u as W,q as se,s as oe,v as re,x as ne,l as ce,y as pe,h as K,a as I,g as ie,i as $,t as D,p as ue,f as de}from"./index-HmBXLNHY.js";import{q as ae,c as me,d as _e,a as ge}from"./vue3-apexcharts-BKJfZktY.js";const be={class:"battleGame"},ve={class:"battleTool"},fe={class:"choseGameType"},he=q({__name:"battleGame",props:{games:{}},setup(u){const o=u,n=L(""),t=L("allGame"),r=[{value:"allGame",label:"全部"},{value:"seasonGame",label:"季賽"},{value:"otherGame",label:"其他"}],f=L(o.games);k(()=>o.games,()=>{f.value=o.games});const B=ee(()=>f.value.filter(l=>!n.value||l.team.toLowerCase().includes(n.value.toLowerCase())));function S(l){return typeof l.SBP=="number"?l.SBP.toFixed(3):0}function m(l,O,p){return l||console.log(l,O,p),p.toFixed(3)}function h(l){const O=new Date(1899,11,30),p=new Date(O.getTime()+l.time*24*60*60*1e3),_=p.getFullYear(),g=p.getMonth()+1,s=p.getDate();return`${_}/${g}/${s}`}function e(){f.value=o.games.filter(l=>t.value==="allGame"?l:t.value==="seasonGame"?l.gameType==="季賽":l.gameType!=="季賽")}return(l,O)=>{const p=b("el-option"),_=b("el-select"),g=b("el-input"),s=b("el-table-column"),y=b("el-table");return P(),A("div",be,[C("div",ve,[C("div",fe,[a(_,{modelValue:t.value,"onUpdate:modelValue":O[0]||(O[0]=v=>t.value=v),placeholder:"賽事類型",size:"small",style:{width:"80px"},onChange:e},{default:i(()=>[(P(),A(N,null,U(r,v=>a(p,{key:v.value,label:v.label,value:v.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),C("div",null,[a(g,{modelValue:n.value,"onUpdate:modelValue":O[1]||(O[1]=v=>n.value=v),size:"small",placeholder:"搜尋隊伍"},null,8,["modelValue"])])]),a(y,{data:B.value,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:i(()=>[a(s,{fixed:"",prop:"team",label:"隊伍"}),a(s,{prop:"time",width:"120",label:"時間",formatter:h,sortable:""}),a(s,{prop:"gameType",label:"賽事"}),a(s,{prop:"group",label:"組別"}),a(s,{prop:"PA",label:"打席"}),a(s,{prop:"SingleB",label:"安打"}),a(s,{prop:"DoubleB",label:"二壘安打"}),a(s,{prop:"TripleB",label:"三壘安打"}),a(s,{prop:"HR",label:"全壘打"}),a(s,{prop:"RBI",label:"打點"}),a(s,{prop:"R",label:"得分"}),a(s,{prop:"BB",label:"四壞"}),a(s,{prop:"SO",label:"三振"}),a(s,{prop:"GO",label:"滾地球出局"}),a(s,{prop:"AO",label:"飛球出局"}),a(s,{prop:"SF",label:"高飛犧牲打"}),a(s,{prop:"SH",label:"犧牲觸擊"}),a(s,{prop:"ERRCH",label:"失誤上壘"}),a(s,{prop:"HBP",label:"觸身球"}),a(s,{prop:"CI",label:"捕手妨礙打擊"}),a(s,{prop:"SB",label:"盜壘"}),a(s,{prop:"CS",label:"盜壘失敗"}),a(s,{prop:"SBP",label:"盜壘成功率",formatter:S}),a(s,{prop:"AVG",label:"AVG",formatter:m}),a(s,{prop:"OBP",label:"上壘率",formatter:m}),a(s,{prop:"SLG",label:"長打率",formatter:m}),a(s,{prop:"OPS",label:"OPS",formatter:m}),a(s,{prop:"E",label:"守備失誤"})]),_:1},8,["data"])])}}}),ye=E(he,[["__scopeId","data-v-6ddd9508"]]),Be={id:"chart"},Se=q({__name:"hitAdvanced",props:{games:{},gameLength:{}},setup(u){const o=u;k(()=>o.games,()=>{n.value.series[0].data=o.games.map(t=>t.AVG).slice(-5),n.value.series[1].data=o.games.map(t=>t.OBP).slice(-5),n.value.series[2].data=o.games.map(t=>t.SLG).slice(-5),n.value.series[3].data=o.games.map(t=>t.OPS).slice(-5)}),k(()=>o.gameLength,()=>{o.gameLength==="5"?(n.value.series[0].data=o.games.map(t=>t.AVG).slice(-5),n.value.series[1].data=o.games.map(t=>t.OBP).slice(-5),n.value.series[2].data=o.games.map(t=>t.SLG).slice(-5),n.value.series[3].data=o.games.map(t=>t.OPS).slice(-5)):o.gameLength==="10"?(n.value.series[0].data=o.games.map(t=>t.AVG).slice(-10),n.value.series[1].data=o.games.map(t=>t.OBP).slice(-10),n.value.series[2].data=o.games.map(t=>t.SLG).slice(-10),n.value.series[3].data=o.games.map(t=>t.OPS).slice(-10)):(n.value.series[0].data=o.games.map(t=>t.AVG),n.value.series[1].data=o.games.map(t=>t.OBP),n.value.series[2].data=o.games.map(t=>t.SLG),n.value.series[3].data=o.games.map(t=>t.OPS))});const n=L({series:[{name:"AVG",data:[0]},{name:"上壘率",data:[0]},{name:"長打率",data:[0]},{name:"OPS",data:[0]}],chartOptions:{chart:{height:350,type:"line",zoom:{enabled:!1},toolbar:{show:!1}},dataLabels:{enabled:!1},stroke:{width:[5,7,5,3],curve:"straight",dashArray:[0,8,5,0]},title:{text:"",align:"left"},legend:{tooltipHoverFormatter:function(t,r){return t+" - <strong>"+r.w.globals.series[r.seriesIndex][r.dataPointIndex]+"</strong>"}},markers:{size:0,hover:{sizeOffset:6}},xaxis:{categories:[]},tooltip:{y:[{title:{formatter:function(t){return t}}},{title:{formatter:function(t){return t}}},{title:{formatter:function(t){return t}}},{title:{formatter:function(t){return t}}}]},grid:{borderColor:"#f1f1f1"},colors:["#CE0000","#0072e3","#ff5809","#9F35FF"]}});return(t,r)=>(P(),A("div",Be,[a(W(ae),{id:"id",type:"line",height:"350",options:n.value.chartOptions,series:n.value.series},null,8,["options","series"])]))}}),Oe=E(Se,[["__scopeId","data-v-13f1cf0e"]]),Pe={id:"performanceChart"},Ge=q({__name:"performanceChart",props:{games:{},gameLength:{}},setup(u){const o=u;k(()=>o.games,()=>{const t=o.games.map(e=>e.SingleB+e.DoubleB+e.TripleB+e.HR),r=o.games.map(e=>e.BB),f=o.games.map(e=>e.SO),B=o.games.map(e=>e.AO),S=o.games.map(e=>e.GO),m=o.games.map(e=>e.HBP),h=o.games.map(e=>e.ERRCH);n.value.series=[t.slice(-5).reduce((e,l)=>e+l||0),r.slice(-5).reduce((e,l)=>e+l||0),f.slice(-5).reduce((e,l)=>e+l||0),B.slice(-5).reduce((e,l)=>e+l||0),S.slice(-5).reduce((e,l)=>e+l||0),m.slice(-5).reduce((e,l)=>e+l||0),h.slice(-5).reduce((e,l)=>e+l||0)]}),k(()=>o.gameLength,()=>{const t=o.games.map(e=>e.SingleB+e.DoubleB+e.TripleB+e.HR),r=o.games.map(e=>e.BB),f=o.games.map(e=>e.SO),B=o.games.map(e=>e.AO),S=o.games.map(e=>e.GO),m=o.games.map(e=>e.HBP),h=o.games.map(e=>e.ERRCH);o.gameLength==="5"?n.value.series=[t.slice(-5).reduce((e,l)=>e+l||0),r.slice(-5).reduce((e,l)=>e+l||0),f.slice(-5).reduce((e,l)=>e+l||0),B.slice(-5).reduce((e,l)=>e+l||0),S.slice(-5).reduce((e,l)=>e+l||0),m.slice(-5).reduce((e,l)=>e+l||0),h.slice(-5).reduce((e,l)=>e+l||0)]:o.gameLength==="10"?n.value.series=[t.slice(-10).reduce((e,l)=>e+l||0),r.slice(-10).reduce((e,l)=>e+l||0),f.slice(-10).reduce((e,l)=>e+l||0),B.slice(-10).reduce((e,l)=>e+l||0),S.slice(-10).reduce((e,l)=>e+l||0),m.slice(-10).reduce((e,l)=>e+l||0),h.slice(-10).reduce((e,l)=>e+l||0)]:n.value.series=[t.reduce((e,l)=>e+l||0),r.reduce((e,l)=>e+l||0),f.reduce((e,l)=>e+l||0),B.reduce((e,l)=>e+l||0),S.reduce((e,l)=>e+l||0),m.reduce((e,l)=>e+l||0),h.reduce((e,l)=>e+l||0)]});const n=L({series:[0],chartOptions:{labels:["安打","四壞","三振","滾地球","飛球","觸身球","失誤上壘"],chart:{type:"donut"},responsive:[{breakpoint:480,options:{chart:{width:250},legend:{position:"bottom"}}}],colors:["#CE0000","#0072e3","#ff5809","#9F35FF","#FFD700","#00DB00","#FF00FF"]}});return(t,r)=>(P(),A("div",Pe,[a(W(ae),{height:"350",type:"donut",options:n.value.chartOptions,series:n.value.series},null,8,["options","series"])]))}}),Ce=E(Ge,[["__scopeId","data-v-4ccdd1e0"]]);function we(u){return se()?(oe(u),!0):!1}function X(u){return typeof u=="function"?u():W(u)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const z=new WeakMap;function Z(u,o,n={}){const{mode:t="replace",route:r=ne(),router:f=ce(),transform:B=l=>l}=n;z.has(f)||z.set(f,new Map);const S=z.get(f);let m=r.query[u];we(()=>{m=void 0});let h;const e=re((l,O)=>(h=O,{get(){return l(),B(m!==void 0?m:X(o))},set(p){m!==p&&(m=p===o||p===null?void 0:p,S.set(u,p===o||p===null?void 0:p),O(),pe(()=>{if(S.size===0)return;const _=Object.fromEntries(S.entries());S.clear();const{params:g,query:s,hash:y}=r;f[X(t)]({params:g,query:{...s,..._},hash:y})}))}}));return k(()=>r.query[u],l=>{m=l,h()},{flush:"sync"}),e}const le=u=>(ue("data-v-74fb68ca"),u=u(),de(),u),He={class:"playerInfoPage"},Le={key:0},Ae={key:1},Re={class:"hitChart"},Ve={class:"hitChartTool"},Fe=le(()=>C("div",{class:"hitChartTitle"},"打擊指數",-1)),xe={class:"hitChart"},Te={class:"hitChartTool"},ke=le(()=>C("div",{class:"hitChartTitle"},"打擊表現",-1)),De="https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png",Ie=q({__name:"PlayerInfoPage",setup(u){var O;const o=Z("name"),n=Z("number"),t=L([]),r=L(),f=L([]),B=L(!1);if(n.value||o.value){B.value=!0;const p=Number(n.value),_=(O=o.value)==null?void 0:O.toString();S(_,p)}async function S(p,_){const g=`${p}${_}`;await me(_).then(s=>{r.value=s}).catch(s=>{console.log(s)}),await _e(g).then(s=>{t.value=s}).catch(s=>{console.log(s)}),await ge(g).then(s=>{r.value&&f.value.push(Object.assign(r.value,{hitter:s}))}).catch(s=>{console.log(s)}),B.value=!1}const m=ee(()=>p=>{const{columns:_,data:g}=p,s=[];return _.forEach((y,v)=>{if(v===0){s[v]="總計";return}const F=g.map(c=>Number(c[y.property]));if(y.property==="SBP"){const c=g.map(G=>G.SB),x=g.map(G=>G.CS),T=c.reduce((G,R)=>G+R)/(c.reduce((G,R)=>G+R)+x.reduce((G,R)=>G+R));s[v]=T.toFixed(3);return}y.property==="AVG"||y.property==="OBP"||y.property==="SLG"||y.property==="OPS"?F.length===0?s[v]=0:s[v]=(F.reduce((c,x)=>c+x)/F.length).toFixed(3):F.length===0?s[v]=0:s[v]=F.reduce((c,x)=>c+x,0)}),s});function h(p,_,g){return p||console.log(p,_,g),g.toFixed(3)}const e=L("5"),l=[{value:"5",label:"近五場"},{value:"10",label:"近十場"},{value:"all",label:"全部"}];return(p,_)=>{const g=b("el-avatar"),s=b("el-col"),y=b("el-descriptions-item"),v=b("el-descriptions"),F=b("el-row"),c=b("el-table-column"),x=b("el-table"),T=b("el-tab-pane"),G=b("el-tabs"),R=b("el-card"),j=b("el-option"),M=b("el-select"),te=b("el-empty"),Q=ie("loading");return P(),A("div",He,[K((P(),I(R,null,{default:i(()=>[a(F,null,{default:i(()=>[a(s,{span:6},{default:i(()=>{var d,V;return[(d=r.value)!=null&&d.img?(P(),I(g,{key:0,shape:"square",size:50,src:(V=r.value)==null?void 0:V.img},null,8,["src"])):(P(),I(g,{key:1,shape:"square",size:50,src:De}))]}),_:1}),a(s,{span:18},{default:i(()=>{var d,V;return[a(v,{title:`${(d=r.value)==null?void 0:d.name} #${(V=r.value)==null?void 0:V.number}`},{default:i(()=>[a(y,{label:"年齡"},{default:i(()=>{var w,H;return[$(D((w=r.value)!=null&&w.age?(H=r.value)==null?void 0:H.age:"--"),1)]}),_:1}),a(y,{label:"身高/體重"},{default:i(()=>{var w,H,Y,J;return[$(D((w=r.value)!=null&&w.height?(H=r.value)==null?void 0:H.height:"-")+D((Y=r.value)!=null&&Y.weight?`/${(J=r.value)==null?void 0:J.weight}`:"/-"),1)]}),_:1}),a(y,{label:"守備位置"},{default:i(()=>{var w,H;return[$(D((w=r.value)!=null&&w.position?(H=r.value)==null?void 0:H.position:"--"),1)]}),_:1}),a(y,{label:"投打習慣"},{default:i(()=>{var w,H;return[$(D((w=r.value)!=null&&w.pitchingAndHiterHabits?(H=r.value)==null?void 0:H.pitchingAndHiterHabits:"--"),1)]}),_:1})]),_:1},8,["title"])]}),_:1})]),_:1}),a(G,{type:"border-card"},{default:i(()=>[a(T,{label:"生涯數據"},{default:i(()=>{var d,V;return[(d=r.value)!=null&&d.hitter?(P(),A("div",Le,[a(x,{data:(V=r.value)==null?void 0:V.hitter,height:"250",style:{width:"100%"},"empty-text":"暫無數據","show-summary":"","summary-method":m.value},{default:i(()=>[a(c,{fixed:"",prop:"season",label:"球季"}),a(c,{prop:"PA",label:"打席"}),a(c,{prop:"AB",label:"打數"}),a(c,{prop:"SingleB",label:"安打"}),a(c,{prop:"DoubleB",label:"二壘安打"}),a(c,{prop:"TripleB",label:"三壘安打"}),a(c,{prop:"HR",label:"全壘打"}),a(c,{prop:"RBI",label:"打點"}),a(c,{prop:"R",label:"得分"}),a(c,{prop:"BB",label:"四壞"}),a(c,{prop:"SO",label:"三振"}),a(c,{prop:"GO",label:"滾地球出局"}),a(c,{prop:"AO",label:"飛球出局"}),a(c,{prop:"SF",label:"高飛犧牲打"}),a(c,{prop:"SH",label:"犧牲觸擊"}),a(c,{prop:"ERRCH",label:"失誤上壘"}),a(c,{prop:"HBP",label:"觸身球"}),a(c,{prop:"SB",label:"盜壘"}),a(c,{prop:"CS",label:"盜壘失敗"}),a(c,{prop:"SBP",label:"盜壘成功率",formatter:h}),a(c,{prop:"AVG",label:"AVG",formatter:h}),a(c,{prop:"OBP",label:"上壘率",formatter:h}),a(c,{prop:"SLG",label:"長打率",formatter:h}),a(c,{prop:"OPS",label:"OPS",formatter:h}),a(c,{prop:"E",label:"守備失誤"})]),_:1},8,["data","summary-method"])])):(P(),A("div",Ae,"暫無選手資料"))]}),_:1}),a(T,{label:"對戰成績"},{default:i(()=>[a(ye,{games:t.value},null,8,["games"])]),_:1})]),_:1})]),_:1})),[[Q,B.value]]),K((P(),I(R,null,{default:i(()=>[a(G,{type:"border-card"},{default:i(()=>[a(T,{label:"打擊數據"},{default:i(()=>[C("div",Re,[C("div",Ve,[Fe,a(M,{modelValue:e.value,"onUpdate:modelValue":_[0]||(_[0]=d=>e.value=d),placeholder:"比賽場數",size:"small",style:{width:"80px"}},{default:i(()=>[(P(),A(N,null,U(l,d=>a(j,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),C("div",null,[a(Oe,{games:t.value,gameLength:e.value},null,8,["games","gameLength"])])]),C("div",xe,[C("div",Te,[ke,C("div",null,[a(M,{modelValue:e.value,"onUpdate:modelValue":_[1]||(_[1]=d=>e.value=d),placeholder:"比賽場數",size:"small",style:{width:"80px"}},{default:i(()=>[(P(),A(N,null,U(l,d=>a(j,{key:d.value,label:d.label,value:d.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])])]),C("div",null,[a(Ce,{games:t.value,gameLength:e.value},null,8,["games","gameLength"])])])]),_:1}),a(T,{label:"投球數據"},{default:i(()=>[a(te,{description:"暫時無資料..."})]),_:1})]),_:1})]),_:1})),[[Q,B.value]])])}}}),Ee=E(Ie,[["__scopeId","data-v-74fb68ca"]]);export{Ee as default};
