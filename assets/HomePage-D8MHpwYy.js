import{q as ae,g as te,a as le,b as ne}from"./vue3-apexcharts-BKJfZktY.js";import{d as G,c as A,a as x,w as l,r as m,o as T,b as t,e as s,t as k,p as Z,f as ee,_ as I,g as q,h as E,i as j,j as h,k as Q,u as se,l as re,F as oe,m as ie}from"./index-HmBXLNHY.js";const B=p=>(Z("data-v-e8a2752d"),p=p(),ee(),p),ce={class:"statisticalCard"},ue=B(()=>s("div",null,"團隊戰績",-1)),de={class:"teamData"},_e={class:"statisticalCard"},me=B(()=>s("div",null,"團隊安打數",-1)),ge={class:"teamData"},pe=B(()=>s("div",null,"本年度安打數",-1)),he={class:"statisticalCard"},ve=B(()=>s("div",null,"團隊打點數",-1)),fe={class:"teamData"},be=B(()=>s("div",null,"本年度打點數",-1)),ye={class:"statisticalCard"},ke=B(()=>s("div",null,"團隊全壘打數",-1)),Le={class:"teamData"},Ce=B(()=>s("div",null,"本年度全壘打數",-1)),Ae=G({__name:"statisticalData",props:{totalHits:{},totalRbis:{},totalHrs:{},thisYearLeagueGame:{}},setup(p){const d=p,r=A(()=>Array.isArray(d.thisYearLeagueGame)?d.thisYearLeagueGame.reduce((g,i)=>g+i.SingleB+i.DoubleB+i.TripleB+i.HR,0):0),_=A(()=>Array.isArray(d.thisYearLeagueGame)?d.thisYearLeagueGame.reduce((g,i)=>g+i.RBI,0):0),y=A(()=>Array.isArray(d.thisYearLeagueGame)?d.thisYearLeagueGame.reduce((g,i)=>g+i.HR,0):0);return(g,i)=>{const c=m("el-col"),o=m("el-row");return T(),x(o,null,{default:l(()=>[t(c,{sm:12,md:6},{default:l(()=>[s("div",ce,[ue,s("div",de,k(),1),s("div",null,k(),1)])]),_:1}),t(c,{sm:12,md:6},{default:l(()=>[s("div",_e,[me,s("div",ge,k(g.totalHits),1),pe,s("div",null,k(r.value),1)])]),_:1}),t(c,{sm:12,md:6},{default:l(()=>[s("div",he,[ve,s("div",fe,k(g.totalRbis),1),be,s("div",null,k(_.value),1)])]),_:1}),t(c,{sm:12,md:6},{default:l(()=>[s("div",ye,[ke,s("div",Le,k(g.totalHrs),1),Ce,s("div",null,k(y.value),1)])]),_:1})]),_:1})}}}),He=I(Ae,[["__scopeId","data-v-e8a2752d"]]),Pe=G({__name:"rankTable",props:{rank:{},loading:{type:Boolean},filterData:{},rankLoading:{type:Boolean}},emits:["handlePlayer"],setup(p,{emit:d}){const r=p,_=d;function y({rowIndex:c}){if(c===0)return{background:"#f0f9eb",color:"#67c23a",fontWeight:"bold"}}function g(){switch(r.rank){case"hit":return"安打";case"rbi":return"打點";case"hr":return"全壘打";case"avg":return"打擊率";case"sb":return"盜壘"}}function i(c){return r.rank==="avg"?c.avg?c.avg.toFixed(3):0 .toFixed(3):c[r.rank]}return(c,o)=>{const b=m("el-table-column"),v=m("el-button"),L=m("el-table"),P=q("loading");return E((T(),x(L,{class:"rankTable",data:r.filterData,style:{width:"100%"},"cell-style":y},{default:l(()=>[t(b,{fixed:"",type:"index",label:"Top",width:"50"}),t(b,{prop:"name",label:"姓名"},{default:l(({row:R})=>[t(v,{class:"playerNameBtn",text:"",size:"small",onClick:V=>_("handlePlayer",R)},{default:l(()=>[j(k(R.name),1)]),_:2},1032,["onClick"])]),_:1}),t(b,{prop:r.rank,label:g()},{default:l(({row:R})=>[j(k(i(R)),1)]),_:1},8,["prop","label"])]),_:1},8,["data"])),[[P,c.rankLoading||c.loading]])}}}),w=I(Pe,[["__scopeId","data-v-4840737d"]]),Te={class:"playerCardBox"},Re=["src"],$e={class:"playerCardText"},De={class:"playerCardTitle"},Be={class:"playerCardInfo"},xe=G({__name:"playerRank",props:{loading:{type:Boolean},playersLeagueCareer:{},playerLength:{}},emits:["handlePlayer","totalHits","totalRbis","totalHrs","totalAvg","totalSb"],setup(p,{emit:d}){const r=p,_=d,y=h(0),g=h(0),i=h(0),c=h(0),o=h(0),b=h(["1"]),v=A(()=>{if(r.playersLeagueCareer.length!==r.playerLength)return[];const n=r.playersLeagueCareer.map(e=>({name:e.name,hit:Array.isArray(e.hitter)?e.hitter.reduce((a,u)=>a+u.SingleB+u.DoubleB+u.TripleB+u.HR,0):0,number:e.number,image:e.img})).sort((e,a)=>a.hit-e.hit);return L(n),n.slice(0,5)});function L(n){y.value=n.reduce((e,a)=>e+a.hit,0),_("totalHits",y.value)}const P=A(()=>{const n=r.playersLeagueCareer.map(e=>({name:e.name,rbi:Array.isArray(e.hitter)?e.hitter.reduce((a,u)=>a+u.RBI,0):0,number:e.number,image:e.img})).sort((e,a)=>a.rbi-e.rbi);return R(n),n.slice(0,5)});function R(n){g.value=n.reduce((e,a)=>e+a.rbi,0),_("totalRbis",g.value)}const V=A(()=>{const n=r.playersLeagueCareer.map(e=>({name:e.name,hr:Array.isArray(e.hitter)?e.hitter.reduce((a,u)=>a+u.HR,0):0,number:e.number,image:e.img})).sort((e,a)=>a.hr-e.hr);return U(n),n.slice(0,5)});function U(n){i.value=n.reduce((e,a)=>e+a.hr,0),_("totalHrs",i.value)}const W=A(()=>{const n=r.playersLeagueCareer.map(e=>({name:e.name,avg:Array.isArray(e.hitter)?e.hitter.reduce((a,u)=>a+u.AVG,0)/e.hitter.length:0,number:e.number,image:e.img})).sort((e,a)=>a.avg-e.avg);return Y(n),n.slice(0,5)});function Y(n){c.value=n.reduce((e,a)=>e+a.avg,0)}const J=A(()=>{const n=r.playersLeagueCareer.map(e=>({name:e.name,sb:Array.isArray(e.hitter)?e.hitter.reduce((a,u)=>a+u.SB,0):0,number:e.number,image:e.img})).sort((e,a)=>a.sb-e.sb);return K(n),n.slice(0,5)});function K(n){o.value=n.reduce((e,a)=>e+a.sb,0)}const $=A(()=>r.playersLeagueCareer.length!=r.playerLength);return(n,e)=>{const a=m("el-card"),u=m("el-col"),C=m("el-row"),D=m("el-collapse-item"),M=m("el-collapse"),S=q("loading");return T(),x(M,{modelValue:b.value,"onUpdate:modelValue":e[5]||(e[5]=f=>b.value=f),accordion:""},{default:l(()=>[t(D,{title:"安打 Top5",name:"1"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(C,null,{default:l(()=>[t(u,{md:8},{default:l(()=>[E((T(),x(a,{class:"playerCard"},{default:l(()=>{var f,N,F,z,O;return[s("div",Te,[s("img",{class:"playerCardImg",src:(f=v.value[0])!=null&&f.image?(N=v.value[0])==null?void 0:N.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,Re),s("div",$e,[s("div",De,k(`${(F=v.value[0])==null?void 0:F.name} #${(z=v.value[0])==null?void 0:z.number}`),1),s("div",Be,k(`目前安打數: ${(O=v.value[0])==null?void 0:O.hit}`),1)])])]}),_:1})),[[S,$.value||n.loading]])]),_:1}),t(u,{md:16},{default:l(()=>[t(w,{rank:"hit",loading:n.loading,rankLoading:$.value,filterData:v.value,onHandlePlayer:e[0]||(e[0]=f=>_("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),t(D,{title:"打點 Top5",name:"2"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(w,{rank:"rbi",loading:n.loading,rankLoading:$.value,filterData:P.value,onHandlePlayer:e[1]||(e[1]=f=>_("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),t(D,{title:"全壘打 Top5",name:"3"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(w,{rank:"hr",loading:n.loading,rankLoading:$.value,filterData:V.value,onHandlePlayer:e[2]||(e[2]=f=>_("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),t(D,{title:"打擊率 Top5",name:"4"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(w,{rank:"avg",loading:n.loading,rankLoading:$.value,filterData:W.value,onHandlePlayer:e[3]||(e[3]=f=>_("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),t(D,{title:"盜壘 Top5",name:"5"},{default:l(()=>[t(a,{class:"rankCard"},{default:l(()=>[t(w,{rank:"sb",loading:n.loading,rankLoading:$.value,filterData:J.value,onHandlePlayer:e[4]||(e[4]=f=>_("handlePlayer",f))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Ge=I(xe,[["__scopeId","data-v-898778c5"]]),Ie=G({__name:"hitterRank",props:{playersLeagueCareer:{},playerLength:{}},setup(p){const d=p;function r(y){if(Array.isArray(y)){const i=(y.reduce((c,o)=>c+o.AVG,0)/y.length).toFixed(3);return i==="NaN"?0 .toFixed(3):i}else return 0}const _=A(()=>d.playersLeagueCareer.length!==d.playerLength);return(y,g)=>{const i=m("el-table-column"),c=m("el-table"),o=q("loading");return E((T(),x(c,{class:"rankTable",stripe:"",data:d.playersLeagueCareer,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:l(()=>[t(i,{fixed:"",prop:"number",label:"No",width:"70",sortable:""}),t(i,{prop:"name",label:"球員",width:"100"}),t(i,{prop:"hitter",label:"AVG"},{default:l(({row:b})=>[j(k(r(b.hitter)),1)]),_:1})]),_:1},8,["data"])),[[o,_.value]])}}}),Se=I(Ie,[["__scopeId","data-v-9668def2"]]),we={id:"hitterScatterChart"},Ve=G({__name:"hitterChart",props:{playersLeagueCareer:{},playerLength:{}},setup(p){const d=p,r=h([]),_=A(()=>d.playersLeagueCareer.length===d.playerLength?d.playersLeagueCareer.map(o=>{const b=g(o.hitter),v=i(o.hitter);return y(o),{name:o.name,data:[[v,b]]}}):[]);function y(o){o.img?r.value.push(o.img):r.value.push("https://cube.elemecdn.com/9/c2/f0ee8a3c7c9638a54940382568c9dpng.png")}function g(o){if(Array.isArray(o)){const v=(o.reduce((L,P)=>L+P.AVG,0)/o.length).toFixed(3);return v==="NaN"?0 .toFixed(3):v}else return 0}function i(o){return Array.isArray(o)?o.reduce((v,L)=>v+L.PA,0):0}const c=h({series:_,chartOptions:{chart:{height:350,type:"scatter",animations:{enabled:!1},zoom:{enabled:!1},toolbar:{show:!1}},colors:["black"],xaxis:{tickAmount:10,min:0},yaxis:{tickAmount:7},markers:{colors:["green"],size:15,discrete:[{seriesIndex:0,dataPointIndex:1,fillColor:"#111",strokeColor:"#eee",size:8}]},fill:{type:"image",opacity:1,image:{src:r.value,width:30,height:30}},legend:{labels:{useSeriesColors:!0}}}});return(o,b)=>(T(),Q("div",we,[t(se(ae),{type:"scatter",height:"350",options:c.value.chartOptions,series:c.value.series},null,8,["options","series"])]))}}),Ye=I(Ve,[["__scopeId","data-v-47d1f431"]]),X=p=>(Z("data-v-505776f1"),p=p(),ee(),p),Ne={class:"homePage"},Fe={class:"block"},ze=X(()=>s("div",{class:"blockTitle"},"球員列表",-1)),Oe=["src"],je={class:"block"},qe=X(()=>s("div",{class:"blockTitle"},"排行榜",-1)),Ee={class:"block"},Ue=X(()=>s("div",{class:"blockTitle"},"團隊",-1)),We=G({__name:"HomePage",setup(p){const d=h([]),r=h(0),_=h(!1),y=h([]),g=re(),i=h(0),c=h(0),o=h(0),b=h([]),v=new Date().getFullYear().toString(),L=h([]),P=h("seasonGame"),R=[{value:"seasonGame",label:"季賽"}];function V(){_.value=!0,te().then(e=>{d.value=e,r.value=e.length,U(e)}).catch(e=>{console.log(e)}).finally(()=>{_.value=!1})}async function U(e){e.forEach(a=>{const u=`${a.name}${a.number}`;le(u).then(C=>{y.value.push(Object.assign(a,{hitter:C}))}).catch(C=>{console.log(C)}),ne(u,"季賽").then(C=>{L.value.push(Object.assign(a,{hitter:C})),W(C)}).catch(C=>{console.log(C)})})}function W(e){b.value.push(...e.filter(a=>a.season===v).map(a=>a))}function Y(e){e.name&&g.push({name:"PlayerInfoPage",query:{name:e.name,number:e.number}})}function J(e){i.value=e}function K(e){c.value=e}function $(e){o.value=e}function n(){console.log(P.value)}return V(),(e,a)=>{const u=m("el-table-column"),C=m("el-button"),D=m("el-table"),M=m("el-row"),S=m("el-tab-pane"),f=m("el-tabs"),N=m("el-option"),F=m("el-select"),z=m("el-empty"),O=q("loading");return T(),Q("div",Ne,[s("div",Fe,[ze,t(f,{type:"border-card",class:"tabsCard"},{default:l(()=>[t(S,{label:"球員"},{default:l(()=>[t(M,null,{default:l(()=>[E((T(),x(D,{class:"homePageTable",stripe:"",data:d.value,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:l(()=>[t(u,{fixed:"",prop:"number",label:"No",width:"70",sortable:""}),t(u,{prop:"name",label:"球員",width:"150"},{default:l(({row:H})=>[t(C,{class:"playerNameBtn",text:"",size:"small",onClick:Je=>Y(H)},{default:l(()=>[s("img",{src:H.img?H.img:"/baseball-analytics/image/icon.jpeg",alt:"player",class:"playerImg"},null,8,Oe),j(" "+k(H.name),1)]),_:2},1032,["onClick"])]),_:1}),t(u,{prop:"age",label:"年齡"}),t(u,{prop:"position",label:"守備位置"})]),_:1},8,["data"])),[[O,_.value]])]),_:1})]),_:1})]),_:1})]),s("div",je,[qe,t(f,{type:"border-card",class:"rankTabsCard"},{default:l(()=>[t(S,{label:"打擊"},{default:l(()=>[t(F,{modelValue:P.value,"onUpdate:modelValue":a[0]||(a[0]=H=>P.value=H),placeholder:"賽事類型",size:"small",style:{width:"80px"},onChange:n},{default:l(()=>[(T(),Q(oe,null,ie(R,H=>t(N,{key:H.value,label:H.label,value:H.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),t(Se,{playersLeagueCareer:L.value,playerLength:r.value},null,8,["playersLeagueCareer","playerLength"]),t(Ye,{playersLeagueCareer:L.value,playerLength:r.value},null,8,["playersLeagueCareer","playerLength"]),t(Ge,{loading:_.value,playersLeagueCareer:L.value,playerLength:r.value,onHandlePlayer:Y,onTotalHits:J,onTotalRbis:K,onTotalHrs:$},null,8,["loading","playersLeagueCareer","playerLength"])]),_:1}),t(S,{label:"投手"},{default:l(()=>[t(z,{description:"暫時無資料..."})]),_:1})]),_:1})]),s("div",Ee,[Ue,t(He,{totalHits:i.value,totalRbis:c.value,totalHrs:o.value,thisYearLeagueGame:b.value},null,8,["totalHits","totalRbis","totalHrs","thisYearLeagueGame"])])])}}}),Qe=I(We,[["__scopeId","data-v-505776f1"]]);export{Qe as default};
