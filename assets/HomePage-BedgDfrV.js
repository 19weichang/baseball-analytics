import{g as Z,a as ee,b as ae}from"./index-DvotmHqo.js";import{d as N,c as P,a as I,w as n,r as c,o as Y,b as a,e as o,t as f,p as K,f as M,_ as V,g as O,h as z,i as Q,j as _,k as te,u as le}from"./index-V-0-Ugyh.js";const B=m=>(K("data-v-e8a2752d"),m=m(),M(),m),ne={class:"statisticalCard"},oe=B(()=>o("div",null,"團隊戰績",-1)),se={class:"teamData"},re={class:"statisticalCard"},ie=B(()=>o("div",null,"團隊安打數",-1)),ce={class:"teamData"},de=B(()=>o("div",null,"本年度安打數",-1)),ue={class:"statisticalCard"},_e=B(()=>o("div",null,"團隊打點數",-1)),me={class:"teamData"},pe=B(()=>o("div",null,"本年度打點數",-1)),ge={class:"statisticalCard"},he=B(()=>o("div",null,"團隊全壘打數",-1)),be={class:"teamData"},ve=B(()=>o("div",null,"本年度全壘打數",-1)),fe=N({__name:"statisticalData",props:{totalHits:{},totalRbis:{},totalHrs:{},thisYearLeagueGame:{}},setup(m){const b=m,s=P(()=>Array.isArray(b.thisYearLeagueGame)?b.thisYearLeagueGame.reduce((u,r)=>u+r.SingleB+r.DoubleB+r.TripleB+r.HR,0):0),p=P(()=>Array.isArray(b.thisYearLeagueGame)?b.thisYearLeagueGame.reduce((u,r)=>u+r.RBI,0):0),D=P(()=>Array.isArray(b.thisYearLeagueGame)?b.thisYearLeagueGame.reduce((u,r)=>u+r.HR,0):0);return(u,r)=>{const L=c("el-col"),C=c("el-row");return Y(),I(C,null,{default:n(()=>[a(L,{sm:12,md:6},{default:n(()=>[o("div",ne,[oe,o("div",se,f(),1),o("div",null,f(),1)])]),_:1}),a(L,{sm:12,md:6},{default:n(()=>[o("div",re,[ie,o("div",ce,f(u.totalHits),1),de,o("div",null,f(s.value),1)])]),_:1}),a(L,{sm:12,md:6},{default:n(()=>[o("div",ue,[_e,o("div",me,f(u.totalRbis),1),pe,o("div",null,f(p.value),1)])]),_:1}),a(L,{sm:12,md:6},{default:n(()=>[o("div",ge,[he,o("div",be,f(u.totalHrs),1),ve,o("div",null,f(D.value),1)])]),_:1})]),_:1})}}}),ye=V(fe,[["__scopeId","data-v-e8a2752d"]]),ke=N({__name:"rankTable",props:{rank:{},loading:{type:Boolean},filterData:{},rankLoading:{type:Boolean}},emits:["handlePlayer"],setup(m,{emit:b}){const s=m,p=b;function D({rowIndex:r}){if(r===0)return{background:"#f0f9eb",color:"#67c23a",fontWeight:"bold"}}function u(){switch(s.rank){case"hit":return"安打";case"rbi":return"打點";case"hr":return"全壘打";case"avg":return"打擊率";case"sb":return"盜壘"}}return(r,L)=>{const C=c("el-table-column"),$=c("el-button"),k=c("el-table"),A=O("loading");return z((Y(),I(k,{class:"rankTable",data:s.filterData,style:{width:"100%"},"cell-style":D},{default:n(()=>[a(C,{fixed:"",type:"index",label:"Top",width:"50"}),a(C,{prop:"name",label:"姓名"},{default:n(({row:R})=>[a($,{class:"playerNameBtn",text:"",size:"small",onClick:S=>p("handlePlayer",R)},{default:n(()=>[Q(f(R.name),1)]),_:2},1032,["onClick"])]),_:1}),a(C,{prop:s.rank,label:u()},null,8,["prop","label"])]),_:1},8,["data"])),[[A,r.rankLoading||r.loading]])}}}),w=V(ke,[["__scopeId","data-v-11f2ebba"]]),Le={class:"playerCardBox"},Ce=["src"],Pe={class:"playerCardText"},He={class:"playerCardTitle"},Te={class:"playerCardInfo"},De=N({__name:"playerRank",props:{loading:{type:Boolean},playersLeagueCareer:{},playerLength:{}},emits:["handlePlayer"],setup(m,{emit:b}){const s=m,p=b,D=_(0),u=_(0),r=_(0),L=_(0),C=_(0),$=_(["1"]),k=P(()=>{if(s.playersLeagueCareer.length!==s.playerLength)return[];const l=s.playersLeagueCareer.map(e=>({name:e.name,hit:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.SingleB+i.DoubleB+i.TripleB+i.HR,0):0,number:e.number,image:e.img})).sort((e,t)=>t.hit-e.hit);return A(l),l.slice(0,5)});function A(l){D.value=l.reduce((e,t)=>e+t.hit,0)}const R=P(()=>{const l=s.playersLeagueCareer.map(e=>({name:e.name,rbi:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.RBI,0):0,number:e.number,image:e.img})).sort((e,t)=>t.rbi-e.rbi);return S(l),l.slice(0,5)});function S(l){u.value=l.reduce((e,t)=>e+t.rbi,0)}const x=P(()=>{const l=s.playersLeagueCareer.map(e=>({name:e.name,hr:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.HR,0):0,number:e.number,image:e.img})).sort((e,t)=>t.hr-e.hr);return G(l),l.slice(0,5)});function G(l){r.value=l.reduce((e,t)=>e+t.hr,0)}const d=P(()=>{const l=s.playersLeagueCareer.map(e=>({name:e.name,avg:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.AVG,0)/e.hitter.length:0,number:e.number,image:e.img})).sort((e,t)=>t.avg-e.avg);return y(l),l.slice(0,5)});function y(l){L.value=l.reduce((e,t)=>e+t.avg,0)}const g=P(()=>{const l=s.playersLeagueCareer.map(e=>({name:e.name,sb:Array.isArray(e.hitter)?e.hitter.reduce((t,i)=>t+i.SB,0):0,number:e.number,image:e.img})).sort((e,t)=>t.sb-e.sb);return v(l),l.slice(0,5)});function v(l){C.value=l.reduce((e,t)=>e+t.sb,0)}const H=P(()=>s.playersLeagueCareer.length!=s.playerLength);return(l,e)=>{const t=c("el-card"),i=c("el-col"),j=c("el-row"),T=c("el-collapse-item"),q=c("el-collapse"),X=O("loading");return Y(),I(q,{modelValue:$.value,"onUpdate:modelValue":e[5]||(e[5]=h=>$.value=h)},{default:n(()=>[a(T,{title:"安打 Top5",name:"1"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(j,null,{default:n(()=>[a(i,{md:8},{default:n(()=>[z((Y(),I(t,{class:"playerCard"},{default:n(()=>{var h,F,U,W,J;return[o("div",Le,[o("img",{class:"playerCardImg",src:(h=k.value[0])!=null&&h.image?(F=k.value[0])==null?void 0:F.image:"/baseball-analytics/image/emptyPlayer.png"},null,8,Ce),o("div",Pe,[o("div",He,f(`${(U=k.value[0])==null?void 0:U.name} #${(W=k.value[0])==null?void 0:W.number}`),1),o("div",Te,f(`目前安打數: ${(J=k.value[0])==null?void 0:J.hit}`),1)])])]}),_:1})),[[X,H.value||l.loading]])]),_:1}),a(i,{md:16},{default:n(()=>[a(w,{rank:"hit",loading:l.loading,rankLoading:H.value,filterData:k.value,onHandlePlayer:e[0]||(e[0]=h=>p("handlePlayer",h))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),a(T,{title:"打點 Top5",name:"2"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(w,{rank:"rbi",loading:l.loading,rankLoading:H.value,filterData:R.value,onHandlePlayer:e[1]||(e[1]=h=>p("handlePlayer",h))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),a(T,{title:"全壘打 Top5",name:"3"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(w,{rank:"hr",loading:l.loading,rankLoading:H.value,filterData:x.value,onHandlePlayer:e[2]||(e[2]=h=>p("handlePlayer",h))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),a(T,{title:"打擊率 Top5",name:"4"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(w,{rank:"avg",loading:l.loading,rankLoading:H.value,filterData:d.value,onHandlePlayer:e[3]||(e[3]=h=>p("handlePlayer",h))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),a(T,{title:"盜壘 Top5",name:"5"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(w,{rank:"sb",loading:l.loading,rankLoading:H.value,filterData:g.value,onHandlePlayer:e[4]||(e[4]=h=>p("handlePlayer",h))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),$e=V(De,[["__scopeId","data-v-a9848a33"]]),E=m=>(K("data-v-e9b9fa41"),m=m(),M(),m),Be={class:"homePage"},Ae={class:"block"},Re=E(()=>o("div",{class:"blockTitle"},"球員列表",-1)),Ye={class:"block"},we=E(()=>o("div",{class:"blockTitle"},"排行榜",-1)),Ie={class:"block"},Se=E(()=>o("div",{class:"blockTitle"},"團隊",-1)),Ge=N({__name:"HomePage",setup(m){const b=_([]),s=_(0),p=_(!1),D=_([]),u=le(),r=_(0),L=_(0),C=_(0),$=_([]),k=new Date().getFullYear().toString(),A=_([]);function R(){p.value=!0,Z().then(d=>{b.value=d,s.value=d.length,S(d)}).catch(d=>{console.log(d)}).finally(()=>{p.value=!1})}async function S(d){d.forEach(y=>{const g=`${y.name}${y.number}`;ee(g).then(v=>{D.value.push(Object.assign(y,{hitter:v}))}).catch(v=>{console.log(v)}),ae(g,"季賽").then(v=>{A.value.push(Object.assign(y,{hitter:v})),x(v)}).catch(v=>{console.log(v)})})}function x(d){$.value.push(...d.filter(y=>y.season===k).map(y=>y))}function G(d){d.name&&u.push({name:"PlayerInfoPage",query:{name:d.name,number:d.number}})}return R(),(d,y)=>{const g=c("el-table-column"),v=c("el-button"),H=c("el-table"),l=c("el-row"),e=c("el-tab-pane"),t=c("el-empty"),i=c("el-tabs"),j=O("loading");return Y(),te("div",Be,[o("div",Ae,[Re,a(i,{type:"border-card",class:"tabsCard"},{default:n(()=>[a(e,{label:"打者"},{default:n(()=>[a(l,null,{default:n(()=>[z((Y(),I(H,{class:"homePageTable",stripe:"",data:b.value,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:n(()=>[a(g,{fixed:"",prop:"number",label:"No",width:"50"}),a(g,{prop:"name",label:"姓名",width:"100"},{default:n(({row:T})=>[a(v,{class:"playerNameBtn",text:"",size:"small",onClick:q=>G(T)},{default:n(()=>[Q(f(T.name),1)]),_:2},1032,["onClick"])]),_:1}),a(g,{prop:"age",label:"年齡"}),a(g,{prop:"position",label:"守備位置"}),a(g,{prop:"gradeIndex",label:"總評"}),a(g,{prop:"hit",label:"打擊"}),a(g,{prop:"speed",label:"速度"}),a(g,{prop:"defense",label:"守備"}),a(g,{prop:"arm",label:"傳球"})]),_:1},8,["data"])),[[j,p.value]])]),_:1})]),_:1}),a(e,{label:"投手"},{default:n(()=>[a(t,{description:"暫時無資料..."})]),_:1})]),_:1})]),o("div",Ye,[we,a(i,{type:"border-card",class:"rankTabsCard"},{default:n(()=>[a(e,{label:"打擊"},{default:n(()=>[a($e,{loading:p.value,playersLeagueCareer:A.value,playerLength:s.value,onHandlePlayer:G},null,8,["loading","playersLeagueCareer","playerLength"])]),_:1}),a(e,{label:"投手"},{default:n(()=>[a(t,{description:"暫時無資料..."})]),_:1})]),_:1})]),o("div",Ie,[Se,a(ye,{totalHits:r.value,totalRbis:L.value,totalHrs:C.value,thisYearLeagueGame:$.value},null,8,["totalHits","totalRbis","totalHrs","thisYearLeagueGame"])])])}}}),xe=V(Ge,[["__scopeId","data-v-e9b9fa41"]]);export{xe as default};
