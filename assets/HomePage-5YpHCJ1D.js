import{g as W,a as J,b as K}from"./index-CEv67r-a.js";import{d as S,c as k,a as I,w as n,r as i,o as D,b as a,e as l,t as f,p as q,f as F,_ as N,g as O,h as z,i as U,j as h,k as M,u as Q}from"./index-Bjlur3bp.js";const L=u=>(q("data-v-e8a2752d"),u=u(),F(),u),X={class:"statisticalCard"},Z=L(()=>l("div",null,"團隊戰績",-1)),ee={class:"teamData"},ae={class:"statisticalCard"},te=L(()=>l("div",null,"團隊安打數",-1)),le={class:"teamData"},ne=L(()=>l("div",null,"本年度安打數",-1)),se={class:"statisticalCard"},oe=L(()=>l("div",null,"團隊打點數",-1)),re={class:"teamData"},ie=L(()=>l("div",null,"本年度打點數",-1)),ce={class:"statisticalCard"},de=L(()=>l("div",null,"團隊全壘打數",-1)),ue={class:"teamData"},_e=L(()=>l("div",null,"本年度全壘打數",-1)),me=S({__name:"statisticalData",props:{totalHits:{},totalRbis:{},totalHrs:{},thisYearLeagueGame:{}},setup(u){const m=u,c=k(()=>Array.isArray(m.thisYearLeagueGame)?m.thisYearLeagueGame.reduce((d,r)=>d+r.SingleB+r.DoubleB+r.TripleB+r.HR,0):0),g=k(()=>Array.isArray(m.thisYearLeagueGame)?m.thisYearLeagueGame.reduce((d,r)=>d+r.RBI,0):0),y=k(()=>Array.isArray(m.thisYearLeagueGame)?m.thisYearLeagueGame.reduce((d,r)=>d+r.HR,0):0);return(d,r)=>{const v=i("el-col"),_=i("el-row");return D(),I(_,null,{default:n(()=>[a(v,{sm:12,md:6},{default:n(()=>[l("div",X,[Z,l("div",ee,f(),1),l("div",null,f(),1)])]),_:1}),a(v,{sm:12,md:6},{default:n(()=>[l("div",ae,[te,l("div",le,f(d.totalHits),1),ne,l("div",null,f(c.value),1)])]),_:1}),a(v,{sm:12,md:6},{default:n(()=>[l("div",se,[oe,l("div",re,f(d.totalRbis),1),ie,l("div",null,f(g.value),1)])]),_:1}),a(v,{sm:12,md:6},{default:n(()=>[l("div",ce,[de,l("div",ue,f(d.totalHrs),1),_e,l("div",null,f(y.value),1)])]),_:1})]),_:1})}}}),pe=N(me,[["__scopeId","data-v-e8a2752d"]]),he=S({__name:"rankTable",props:{rank:{},loading:{type:Boolean},filterData:{},rankLoading:{type:Boolean}},emits:["handlePlayer"],setup(u,{emit:m}){const c=u,g=m;function y({rowIndex:r}){if(r===0)return{background:"#f0f9eb",color:"#67c23a",fontWeight:"bold"}}function d(){switch(c.rank){case"hit":return"安打";case"rbi":return"打點";case"hr":return"全壘打"}}return(r,v)=>{const _=i("el-table-column"),C=i("el-button"),R=i("el-table"),H=O("loading");return z((D(),I(R,{class:"rankTable",data:c.filterData,style:{width:"100%"},"cell-style":y},{default:n(()=>[a(_,{fixed:"",type:"index",label:"Top",width:"50"}),a(_,{prop:"name",label:"姓名"},{default:n(({row:P})=>[a(C,{class:"playerNameBtn",text:"",size:"small",onClick:A=>g("handlePlayer",P)},{default:n(()=>[U(f(P.name),1)]),_:2},1032,["onClick"])]),_:1}),a(_,{prop:c.rank,label:d()},null,8,["prop","label"])]),_:1},8,["data"])),[[H,r.rankLoading||r.loading]])}}}),j=N(he,[["__scopeId","data-v-aafff236"]]),ge={class:"playerCardBox"},be=["src"],fe={class:"playerCardText"},ve={class:"playerCardTitle"},ye={class:"playerCardInfo"},ke=S({__name:"playerRank",props:{loading:{type:Boolean},playersLeagueCareer:{},playerLength:{}},emits:["handlePlayer"],setup(u,{emit:m}){const c=u,g=m,y=h(0),d=h(0),r=h(0),v=h(["1"]),_=k(()=>{if(c.playersLeagueCareer.length!==c.playerLength)return[];const o=c.playersLeagueCareer.map(e=>({name:e.name,hit:Array.isArray(e.hitter)?e.hitter.reduce((t,s)=>t+s.SingleB+s.DoubleB+s.TripleB+s.HR,0):0,number:e.number,image:e.img})).sort((e,t)=>t.hit-e.hit);return C(o),o.slice(0,5)});function C(o){y.value=o.reduce((e,t)=>e+t.hit,0)}const R=k(()=>{const o=c.playersLeagueCareer.map(e=>({name:e.name,rbi:Array.isArray(e.hitter)?e.hitter.reduce((t,s)=>t+s.RBI,0):0,number:e.number,image:e.img})).sort((e,t)=>t.rbi-e.rbi);return H(o),o.slice(0,5)});function H(o){d.value=o.reduce((e,t)=>e+t.rbi,0)}const P=k(()=>{const o=c.playersLeagueCareer.map(e=>({name:e.name,hr:Array.isArray(e.hitter)?e.hitter.reduce((t,s)=>t+s.HR,0):0,number:e.number,image:e.img})).sort((e,t)=>t.hr-e.hr);return A(o),o.slice(0,5)});function A(o){r.value=o.reduce((e,t)=>e+t.hr,0)}const $=k(()=>c.playersLeagueCareer.length!=c.playerLength);return(o,e)=>{const t=i("el-card"),s=i("el-col"),b=i("el-row"),T=i("el-collapse-item"),x=i("el-collapse"),B=O("loading");return D(),I(x,{modelValue:v.value,"onUpdate:modelValue":e[3]||(e[3]=p=>v.value=p)},{default:n(()=>[a(T,{title:"安打 Top5",name:"1"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(b,null,{default:n(()=>[a(s,{md:8},{default:n(()=>[z((D(),I(t,{class:"playerCard"},{default:n(()=>{var p,Y,G,w,V;return[l("div",ge,[l("img",{class:"playerCardImg",src:(p=_.value[0])!=null&&p.image?(Y=_.value[0])==null?void 0:Y.image:"public/image/emptyPlayer.png"},null,8,be),l("div",fe,[l("div",ve,f(`${(G=_.value[0])==null?void 0:G.name} #${(w=_.value[0])==null?void 0:w.number}`),1),l("div",ye,f(`目前安打數: ${(V=_.value[0])==null?void 0:V.hit}`),1)])])]}),_:1})),[[B,$.value||o.loading]])]),_:1}),a(s,{md:16},{default:n(()=>[a(j,{rank:"hit",loading:o.loading,rankLoading:$.value,filterData:_.value,onHandlePlayer:e[0]||(e[0]=p=>g("handlePlayer",p))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1})]),_:1}),a(T,{title:"打點 Top5",name:"2"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(j,{rank:"rbi",loading:o.loading,rankLoading:$.value,filterData:R.value,onHandlePlayer:e[1]||(e[1]=p=>g("handlePlayer",p))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1}),a(T,{title:"全壘打 Top5",name:"3"},{default:n(()=>[a(t,{class:"rankCard"},{default:n(()=>[a(j,{rank:"hr",loading:o.loading,rankLoading:$.value,filterData:P.value,onHandlePlayer:e[2]||(e[2]=p=>g("handlePlayer",p))},null,8,["loading","rankLoading","filterData"])]),_:1})]),_:1})]),_:1},8,["modelValue"])}}}),Le=N(ke,[["__scopeId","data-v-45e26a1f"]]),E=u=>(q("data-v-e9b9fa41"),u=u(),F(),u),Ce={class:"homePage"},He={class:"block"},Pe=E(()=>l("div",{class:"blockTitle"},"球員列表",-1)),$e={class:"block"},Be=E(()=>l("div",{class:"blockTitle"},"排行榜",-1)),De={class:"block"},Re=E(()=>l("div",{class:"blockTitle"},"團隊",-1)),Te=S({__name:"HomePage",setup(u){const m=h([]),c=h(0),g=h(!1),y=h([]),d=Q(),r=h(0),v=h(0),_=h(0),C=h([]),R=new Date().getFullYear().toString(),H=h([]);function P(){g.value=!0,W().then(e=>{m.value=e,c.value=e.length,A(e)}).catch(e=>{console.log(e)}).finally(()=>{g.value=!1})}async function A(e){e.forEach(t=>{const s=`${t.name}${t.number}`;J(s).then(b=>{y.value.push(Object.assign(t,{hitter:b}))}).catch(b=>{console.log(b)}),K(s,"季賽").then(b=>{H.value.push(Object.assign(t,{hitter:b})),$(b)}).catch(b=>{console.log(b)})})}function $(e){C.value.push(...e.filter(t=>t.season===R).map(t=>t))}function o(e){e.name&&d.push({name:"PlayerInfoPage",query:{name:e.name,number:e.number}})}return P(),(e,t)=>{const s=i("el-table-column"),b=i("el-button"),T=i("el-table"),x=i("el-row"),B=i("el-tab-pane"),p=i("el-empty"),Y=i("el-tabs"),G=O("loading");return D(),M("div",Ce,[l("div",He,[Pe,a(Y,{type:"border-card",class:"tabsCard"},{default:n(()=>[a(B,{label:"打者"},{default:n(()=>[a(x,null,{default:n(()=>[z((D(),I(T,{class:"homePageTable",stripe:"",data:m.value,height:"250",style:{width:"100%"},"empty-text":"暫無數據"},{default:n(()=>[a(s,{fixed:"",prop:"number",label:"No",width:"50"}),a(s,{prop:"name",label:"姓名",width:"100"},{default:n(({row:w})=>[a(b,{class:"playerNameBtn",text:"",size:"small",onClick:V=>o(w)},{default:n(()=>[U(f(w.name),1)]),_:2},1032,["onClick"])]),_:1}),a(s,{prop:"age",label:"年齡"}),a(s,{prop:"position",label:"守備位置"}),a(s,{prop:"gradeIndex",label:"總評"}),a(s,{prop:"hit",label:"打擊"}),a(s,{prop:"speed",label:"速度"}),a(s,{prop:"defense",label:"守備"}),a(s,{prop:"arm",label:"傳球"})]),_:1},8,["data"])),[[G,g.value]])]),_:1})]),_:1}),a(B,{label:"投手"},{default:n(()=>[a(p,{description:"暫時無資料..."})]),_:1})]),_:1})]),l("div",$e,[Be,a(Y,{type:"border-card",class:"rankTabsCard"},{default:n(()=>[a(B,{label:"打擊"},{default:n(()=>[a(Le,{loading:g.value,playersLeagueCareer:H.value,playerLength:c.value,onHandlePlayer:o},null,8,["loading","playersLeagueCareer","playerLength"])]),_:1}),a(B,{label:"投手"},{default:n(()=>[a(p,{description:"暫時無資料..."})]),_:1})]),_:1})]),l("div",De,[Re,a(pe,{totalHits:r.value,totalRbis:v.value,totalHrs:_.value,thisYearLeagueGame:C.value},null,8,["totalHits","totalRbis","totalHrs","thisYearLeagueGame"])])])}}}),Ie=N(Te,[["__scopeId","data-v-e9b9fa41"]]);export{Ie as default};
